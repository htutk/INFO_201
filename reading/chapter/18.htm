<!--[if IE]><![endif]-->
<!DOCTYPE html>
<!--[if IE 8]><html class="no-js ie8 oldie" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#"

    
        itemscope itemtype="http://schema.org/Book http://schema.org/ItemPage" data-login-url="/accounts/login/"
data-offline-url="/"
data-url="/library/view/programming-skills-for/9780135159071/ch16.xhtml"
data-csrf-cookie="csrfsafari"
data-highlight-privacy=""


  data-user-id="4550391"
  data-user-uuid="84c171ee-4dd7-4bd0-a2bc-254287669aaa"
  data-username="alexhtut"
  data-account-type="B2B"
  
  data-activated-trial-date=""


  data-archive="9780135159071"
  data-publishers="Addison-Wesley Professional"



  data-htmlfile-name="ch16.xhtml"
  data-epub-title="Programming Skills for Data Science: Start Writing Code to Wrangle, Analyze, and Visualize Data with R, First Edition" data-debug=0 data-testing=0><![endif]-->
<!--[if gt IE 8]><!-->
<html class=" js flexbox flexboxlegacy no-touch no-websqldatabase indexeddb history csscolumns csstransforms localstorage sessionstorage applicationcache svg inlinesvg no-zoom" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#" itemscope="" itemtype="http://schema.org/Book http://schema.org/ItemPage" data-login-url="/accounts/login/" data-offline-url="/" data-url="/library/view/programming-skills-for/9780135159071/ch16.xhtml" data-csrf-cookie="csrfsafari" data-highlight-privacy="" data-user-id="4550391" data-user-uuid="84c171ee-4dd7-4bd0-a2bc-254287669aaa" data-username="alexhtut" data-account-type="B2B" data-activated-trial-date="" data-archive="9780135159071" data-publishers="Addison-Wesley Professional" data-htmlfile-name="ch16.xhtml" data-epub-title="Programming Skills for Data Science: Start Writing Code to Wrangle, Analyze, and Visualize Data with R, First Edition" data-debug="0" data-testing="0" style="" lang="en"><!--<![endif]--><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="author" content="Safari Books Online"><meta name="format-detection" content="telephone=no"><meta http-equiv="cleartype" content="on"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="apple-itunes-app" content="app-id=881697395, app-argument=safaridetail://9780135159071"><meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, maximum-scale=1.0"><meta property="twitter:account_id" content="4503599627559754"><script src="18_files/nr-1123.js"></script><script async="" src="18_files/gtm.js"></script><script async="" src="18_files/analytics.js"></script><script type="text/javascript">window.NREUM||(NREUM={}),__nr_require=function(e,n,t){function r(t){if(!n[t]){var o=n[t]={exports:{}};e[t][0].call(o.exports,function(n){var o=e[t][1][n];return r(o||n)},o,o.exports)}return n[t].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<t.length;o++)r(t[o]);return r}({1:[function(e,n,t){function r(){}function o(e,n,t){return function(){return i(e,[c.now()].concat(u(arguments)),n?null:this,t),n?void 0:this}}var i=e("handle"),a=e(3),u=e(4),f=e("ee").get("tracer"),c=e("loader"),s=NREUM;"undefined"==typeof window.newrelic&&(newrelic=s);var p=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],d="api-",l=d+"ixn-";a(p,function(e,n){s[n]=o(d+n,!0,"api")}),s.addPageAction=o(d+"addPageAction",!0),s.setCurrentRouteName=o(d+"routeName",!0),n.exports=newrelic,s.interaction=function(){return(new r).get()};var m=r.prototype={createTracer:function(e,n){var t={},r=this,o="function"==typeof n;return i(l+"tracer",[c.now(),e,t],r),function(){if(f.emit((o?"":"no-")+"fn-start",[c.now(),r,o],t),o)try{return n.apply(this,arguments)}catch(e){throw f.emit("fn-err",[arguments,this,e],t),e}finally{f.emit("fn-end",[c.now()],t)}}}};a("actionText,setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(e,n){m[n]=o(l+n)}),newrelic.noticeError=function(e,n){"string"==typeof e&&(e=new Error(e)),i("err",[e,c.now(),!1,n])}},{}],2:[function(e,n,t){function r(e,n){if(!o)return!1;if(e!==o)return!1;if(!n)return!0;if(!i)return!1;for(var t=i.split("."),r=n.split("."),a=0;a<r.length;a++)if(r[a]!==t[a])return!1;return!0}var o=null,i=null,a=/Version\/(\S+)\s+Safari/;if(navigator.userAgent){var u=navigator.userAgent,f=u.match(a);f&&u.indexOf("Chrome")===-1&&u.indexOf("Chromium")===-1&&(o="Safari",i=f[1])}n.exports={agent:o,version:i,match:r}},{}],3:[function(e,n,t){function r(e,n){var t=[],r="",i=0;for(r in e)o.call(e,r)&&(t[i]=n(r,e[r]),i+=1);return t}var o=Object.prototype.hasOwnProperty;n.exports=r},{}],4:[function(e,n,t){function r(e,n,t){n||(n=0),"undefined"==typeof t&&(t=e?e.length:0);for(var r=-1,o=t-n||0,i=Array(o<0?0:o);++r<o;)i[r]=e[n+r];return i}n.exports=r},{}],5:[function(e,n,t){n.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],ee:[function(e,n,t){function r(){}function o(e){function n(e){return e&&e instanceof r?e:e?f(e,u,i):i()}function t(t,r,o,i){if(!d.aborted||i){e&&e(t,r,o);for(var a=n(o),u=v(t),f=u.length,c=0;c<f;c++)u[c].apply(a,r);var p=s[y[t]];return p&&p.push([b,t,r,a]),a}}function l(e,n){h[e]=v(e).concat(n)}function m(e,n){var t=h[e];if(t)for(var r=0;r<t.length;r++)t[r]===n&&t.splice(r,1)}function v(e){return h[e]||[]}function g(e){return p[e]=p[e]||o(t)}function w(e,n){c(e,function(e,t){n=n||"feature",y[t]=n,n in s||(s[n]=[])})}var h={},y={},b={on:l,addEventListener:l,removeEventListener:m,emit:t,get:g,listeners:v,context:n,buffer:w,abort:a,aborted:!1};return b}function i(){return new r}function a(){(s.api||s.feature)&&(d.aborted=!0,s=d.backlog={})}var u="nr@context",f=e("gos"),c=e(3),s={},p={},d=n.exports=o();d.backlog=s},{}],gos:[function(e,n,t){function r(e,n,t){if(o.call(e,n))return e[n];var r=t();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,n,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return e[n]=r,r}var o=Object.prototype.hasOwnProperty;n.exports=r},{}],handle:[function(e,n,t){function r(e,n,t,r){o.buffer([e],r),o.emit(e,n,t)}var o=e("ee").get("handle");n.exports=r,r.ee=o},{}],id:[function(e,n,t){function r(e){var n=typeof e;return!e||"object"!==n&&"function"!==n?-1:e===window?0:a(e,i,function(){return o++})}var o=1,i="nr@id",a=e("gos");n.exports=r},{}],loader:[function(e,n,t){function r(){if(!E++){var e=x.info=NREUM.info,n=l.getElementsByTagName("script")[0];if(setTimeout(s.abort,3e4),!(e&&e.licenseKey&&e.applicationID&&n))return s.abort();c(y,function(n,t){e[n]||(e[n]=t)}),f("mark",["onload",a()+x.offset],null,"api");var t=l.createElement("script");t.src="https://"+e.agent,n.parentNode.insertBefore(t,n)}}function o(){"complete"===l.readyState&&i()}function i(){f("mark",["domContent",a()+x.offset],null,"api")}function a(){return O.exists&&performance.now?Math.round(performance.now()):(u=Math.max((new Date).getTime(),u))-x.offset}var u=(new Date).getTime(),f=e("handle"),c=e(3),s=e("ee"),p=e(2),d=window,l=d.document,m="addEventListener",v="attachEvent",g=d.XMLHttpRequest,w=g&&g.prototype;NREUM.o={ST:setTimeout,SI:d.setImmediate,CT:clearTimeout,XHR:g,REQ:d.Request,EV:d.Event,PR:d.Promise,MO:d.MutationObserver};var h=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1123.min.js"},b=g&&w&&w[m]&&!/CriOS/.test(navigator.userAgent),x=n.exports={offset:u,now:a,origin:h,features:{},xhrWrappable:b,userAgent:p};e(1),l[m]?(l[m]("DOMContentLoaded",i,!1),d[m]("load",r,!1)):(l[v]("onreadystatechange",o),d[v]("onload",r)),f("mark",["firstbyte",u],null,"api");var E=0,O=e(5)},{}]},{},["loader"]);</script><link rel="apple-touch-icon" href="https://learning.oreilly.com/static/images/apple-touch-icon.0c29511d2d72.png"><link rel="shortcut icon" href="https://learning.oreilly.com/favicon.ico" type="image/x-icon"><link href="18_files/css.css" rel="stylesheet" type="text/css"><title>18
 Dynamic Reports with R Markdown - Programming Skills for Data Science: 
Start Writing Code to Wrangle, Analyze, and Visualize Data with R, First
 Edition</title><link rel="stylesheet" href="18_files/1f82858304ba.css" type="text/css"><link rel="stylesheet" type="text/css" href="18_files/annotator.css"><link rel="stylesheet" href="18_files/font-awesome.css"><style type="text/css" title="ibis-book">@page{margin:1em 2em}#sbo-rt-content div{margin-top:.3em;margin-bottom:.3em;margin-left:1em;margin-right:1.3em}#sbo-rt-content h1.h1{font-size:2em;margin-top:1.5em;margin-bottom:.6em;text-align:center;font-weight:bold;page-break-after:avoid}#sbo-rt-content .part{font-size:2em;margin-top:1em;margin-bottom:1.5em;margin-right:.5em;text-align:right;font-weight:bold;page-break-after:avoid}#sbo-rt-content .h2{font-size:1.8em;margin-top:1em;margin-bottom:2.5em;font-weight:bold;page-break-after:avoid;text-align:right}#sbo-rt-content .h2a{font-size:150%;margin-top:.5em;margin-bottom:3em;font-weight:bold;page-break-after:avoid;text-align:right}#sbo-rt-content .h2c{font-size:1.7em;margin-top:1em;margin-bottom:1.3em;font-weight:bold;page-break-after:avoid;text-align:left}#sbo-rt-content h3.h3{font-size:1.4em;margin-top:1.3em;margin-bottom:.5em;font-weight:bold;page-break-after:avoid;text-align:left;margin-left:1.5em;text-indent:-1.5em}#sbo-rt-content h3.h3z{font-size:1.4em;margin-top:1.3em;margin-bottom:.5em;font-weight:bold;page-break-after:avoid;text-align:left;margin-left:2em;text-indent:-2em}#sbo-rt-content h3.h3a{font-size:1.3em;margin-top:1.2em;margin-bottom:.5em;font-weight:bold;page-break-after:avoid;text-align:left}#sbo-rt-content h4{font-size:1.2em;margin-top:1.3em;margin-bottom:.5em;font-weight:bold;page-break-after:avoid;text-align:left;margin-left:2.2em;text-indent:-2.2em}#sbo-rt-content h5{margin-top:1em;margin-bottom:.5em;font-weight:bold;font-size:105%;page-break-after:avoid;text-align:left}#sbo-rt-content h6{margin-top:1em;margin-bottom:.5em;font-weight:bold;font-size:100%;page-break-after:avoid;text-align:left}#sbo-rt-content div.coverimage img{max-width:99%;max-height:99%}#sbo-rt-content .coverimage{margin-top:.2em;margin-bottom:.2em;text-align:center}#sbo-rt-content .indent{margin-top:.3em;margin-bottom:.3em;text-indent:1.3em}#sbo-rt-content .noindent{margin-top:.5em;margin-bottom:.5em;text-indent:0}#sbo-rt-content .bullet{margin-top:.6em;margin-bottom:.6em;text-indent:0}#sbo-rt-content .bullet-para{margin-top:.6em;margin-bottom:.6em;text-indent:0}#sbo-rt-content .copyright{margin-top:3.5em;margin-bottom:.5em;text-indent:0;font-size:.9em}#sbo-rt-content .copy{margin-top:1em;margin-bottom:.5em;text-indent:0}#sbo-rt-content .author{margin-top:.2em;margin-bottom:7.5em;text-align:center;font-weight:bold;font-size:1.2em}#sbo-rt-content .middle img{vertical-align:middle}#sbo-rt-content div.image img{max-width:99%;max-height:99%}#sbo-rt-content .image{margin-top:.42em;text-align:center}#sbo-rt-content .toc-fm{margin-top:.3em;margin-bottom:.3em;text-indent:0;margin-left:2em;text-align:left}#sbo-rt-content .toc-part{margin-top:1.3em;margin-bottom:.5em;text-indent:0;margin-left:.1em;text-align:left}#sbo-rt-content .toc-chap{margin-top:1em;margin-bottom:.5em;text-indent:0;margin-left:1em;text-align:left}#sbo-rt-content .toc-chap1{margin-top:1em;margin-bottom:.5em;text-indent:0;margin-left:.5em;text-align:left}#sbo-rt-content .toc-sec{margin-top:.2em;margin-bottom:.2em;margin-left:3.8em;text-indent:-2em;text-align:left}#sbo-rt-content .toc-bm{margin-top:1.3em;margin-bottom:.2em;text-indent:0;margin-left:1.8em;text-align:left}#sbo-rt-content .border{border-bottom:solid #58585A .1em}#sbo-rt-content .sidebarpara{margin-top:.5em;margin-bottom:.1em;margin-left:1em;text-align:left}#sbo-rt-content .indexmain{margin-top:.2em;margin-bottom:.2em;text-align:left;margin-left:.8em;text-indent:-.8em}#sbo-rt-content .indexsub{margin-top:.2em;margin-bottom:.2em;margin-left:2.5em;text-indent:-.8em;text-align:left}#sbo-rt-content a{text-decoration:none}#sbo-rt-content .heading{page-break-inside:avoid}#sbo-rt-content .all{border-top:black solid .1em;border-bottom:black solid .1em}#sbo-rt-content td{vertical-align:top}#sbo-rt-content table{width:100%;border-collapse:collapse}#sbo-rt-content ul{margin-top:1em;margin-bottom:1em;list-style-type:square}#sbo-rt-content ul.ul1{margin-top:1em;margin-bottom:1em;list-style-type:circle}#sbo-rt-content ul li p{margin-top:.5em;margin-bottom:.5em;color:#000;font-weight:normal}#sbo-rt-content ul li p.bullet{margin-top:.5em;margin-bottom:.5em;font-weight:normal}#sbo-rt-content .number{margin-top:.3em;margin-bottom:.3em;text-indent:0}#sbo-rt-content ol{margin-top:.8em;margin-bottom:.8em;margin-left:0;font-weight:normal}#sbo-rt-content ol li{color:#000;margin-top:.017em;margin-bottom:.017em}#sbo-rt-content ol.left{margin-top:.5em;margin-bottom:.5em;margin-left:2em;font-weight:normal}#sbo-rt-content ol li p{color:#000;font-weight:normal}#sbo-rt-content .blockquote{margin-top:.8em;margin-bottom:.8em;margin-left:2.5em;margin-right:2.5em;font-size:.9em}#sbo-rt-content .h3i{font-size:1.3em;margin-top:1em;margin-bottom:.3em;font-weight:bold;page-break-after:avoid;text-align:left}#sbo-rt-content .h3b{margin-top:1em;margin-bottom:1em;border-bottom:solid .01em;margin-left:.1em;font-weight:bold;text-align:left}#sbo-rt-content .pre{font-family:Courier New,monospace;font-size:.88em;margin-top:.5em;margin-bottom:.5em;margin-left:.1em;background-color:#F3F4F4;text-align:left;padding:.2em}#sbo-rt-content .prea{font-family:Courier New,monospace;font-size:.88em;margin-top:.8em;margin-bottom:.8em;margin-left:.2em;text-align:left}#sbo-rt-content .right{margin-top:1em;margin-bottom:1em;text-align:right;font-size:.9em}#sbo-rt-content figcaption{font-size:.9em;margin-top:.5em;margin-bottom:.1em;font-weight:normal;color:#000}#sbo-rt-content figure{margin-top:1em;margin-bottom:1em;margin-left:1.5em;margin-right:1.5em}#sbo-rt-content figure>img{max-width:99%;max-height:99%}#sbo-rt-content div.image-p img{max-width:99%;max-height:99%}#sbo-rt-content .image-p{page-break-before:always;text-align:center}#sbo-rt-content div.image-pa img{max-width:99%;max-height:99%}#sbo-rt-content .image-pa{text-align:center}#sbo-rt-content .codelink{font-size:.88em;margin-top:.5em;margin-bottom:.5em;font-weight:bold;page-break-after:avoid}#sbo-rt-content .notepara{margin-top:.5em;margin-bottom:.5em;text-indent:0;margin-left:1em;text-align:left}#sbo-rt-content .note-m{margin-top:1em;margin-bottom:1em;margin-left:1.3em;margin-right:1.3em;border-radius:.7em;padding:.5em;border:solid #F3C7CC .2em;background-color:#F7D6D9;page-break-after:avoid;page-break-inside:avoid}#sbo-rt-content .note-g{margin-top:1em;margin-bottom:1em;margin-left:1.3em;margin-right:1.3em;border-radius:.7em;padding:.5em;border:solid #C5E4CA .2em;background-color:#D5EBDA;page-break-after:avoid;page-break-inside:avoid}#sbo-rt-content .note-y{margin-top:1em;margin-bottom:1em;margin-left:1.3em;margin-right:1.3em;border-radius:.7em;padding:.5em;border:solid #FEB .2em;background-color:#FFF3CD;page-break-after:avoid;page-break-inside:avoid}#sbo-rt-content .note-b{margin-top:1em;margin-bottom:1em;margin-left:1.3em;margin-right:1.3em;border-radius:.7em;padding:.5em;border:solid #BDDAF2 .2em;background-color:#CFE4F6;page-break-after:avoid;page-break-inside:avoid}#sbo-rt-content .box-ash{margin-top:1em;margin-bottom:1em;margin-left:1.3em;margin-right:1.3em;border-radius:.7em;padding:.5em;border:solid #DDDEDF .15em;background-color:#F1F1F2;page-break-after:avoid;page-break-inside:avoid}#sbo-rt-content .footnote{margin-top:.5em;margin-bottom:.5em;margin-left:1em;text-indent:1em;text-align:left;font-size:.8em}#sbo-rt-content .footnotesb{font-size:.8em;margin-top:.5em;margin-bottom:.5em;margin-left:1.2em;text-indent:.8em;text-align:left}#sbo-rt-content .BoldItalic{font-family:courier New,monospace;font-weight:bold;font-style:italic}#sbo-rt-content .subtitle{margin-top:.1em;text-align:center;margin-bottom:2.5em;font-weight:bold;font-size:1.5em}#sbo-rt-content .publisher{margin-top:.2em;margin-bottom:.5em;text-align:center}#sbo-rt-content .address{margin-top:.1em;margin-bottom:.2em;text-align:center}#sbo-rt-content .ded{margin-top:6em;margin-bottom:.5em;margin-left:2em;margin-right:2em;text-align:center}#sbo-rt-content .pd_ash{color:#666}#sbo-rt-content .pd_red1{color:#CD5E27}#sbo-rt-content .pd_red{color:#ed1c24}#sbo-rt-content .pd_yellow{color:#A28951}#sbo-rt-content .pd_maroon{color:#721B24}#sbo-rt-content .pd_ora1{color:#C2A02E}#sbo-rt-content .pd_maroon1{color:#9d5a11}#sbo-rt-content .pd_green{color:#6D9878}#sbo-rt-content .pd_green1{color:#34b352}#sbo-rt-content .pd_blue{color:#035090}#sbo-rt-content .pd_blue2{color:#1224ff}#sbo-rt-content .pd_ash1{color:#939598}#sbo-rt-content .title{margin-top:.2em;margin-bottom:.2em;font-weight:bold;page-break-after:avoid;page-break-inside:avoid}#sbo-rt-content .box{margin-top:.8em;margin-bottom:.8em;margin-left:1.3em;margin-right:1.3em;border:solid #000 .15em;padding:.1em .5em .1em .5em}#sbo-rt-content .credit{margin-top:.5em;margin-bottom:.5em;margin-left:1.5em;text-indent:-1.5em}#sbo-rt-content .bordert{border-top:solid #919395 .1em;border-bottom:solid #919395 .1em}#sbo-rt-content .strike{text-decoration:line-through}#sbo-rt-content .tab-para{margin-top:.2em;margin-bottom:.2em;margin-left:1.2em;text-indent:-.8em}#sbo-rt-content .tab-para1{margin-top:.2em;margin-bottom:.2em;margin-left:.3em;text-indent:0}#sbo-rt-content .tab-right{margin-top:.2em;margin-bottom:.2em;margin-right:2em;text-indent:0;text-align:right}#sbo-rt-content .tab-center{margin-top:.2em;margin-bottom:.2em;text-indent:0;text-align:center}#sbo-rt-content .thead_right{margin-top:.2em;margin-bottom:.2em;margin-right:2em;text-indent:0;text-align:right}#sbo-rt-content .tab-right1{margin-top:.2em;margin-bottom:.2em;margin-left:0;text-indent:0;text-align:right}#sbo-rt-content .thead{margin-top:.2em;margin-bottom:.2em;margin-left:.4em;text-indent:0;text-align:left}#sbo-rt-content .theada{margin-top:.2em;margin-bottom:.2em;margin-left:0;text-indent:0;text-align:left}#sbo-rt-content .thead1{margin-top:.2em;margin-bottom:.2em;margin-right:1em;text-indent:0;text-align:right}#sbo-rt-content .tab-caption{font-size:.9em;margin-top:.5em;margin-bottom:.3em;font-weight:normal}#sbo-rt-content .tab-heading{margin-top:1em;margin-bottom:1em;page-break-inside:avoid}#sbo-rt-content .big{font-size:1.5em;color:#939598}#sbo-rt-content .hidden{display:none;visibility:hidden}</style><script> // <![CDATA[
    var g = {
      position_cache: {
        
          "chapter": "/api/v1/book/9780135159071/chapter/ch16.xhtml",
          "book_id": "9780135159071",
          "chapter_uri": "ch16.xhtml",
          "position": 99.8716340202,
          "user_uuid": "84c171ee-4dd7-4bd0-a2bc-254287669aaa",
          "next_chapter_uri": "/library/view/programming-skills-for/9780135159071/ch17.xhtml"
        
      },
      title: "Programming Skills for Data Science: Start Writing Code to Wrangle, Analyze, and Visualize Data with R, First Edition",
      author_list: "Michael Freeman, Joel Ross",
      format: "book",
      source: "application/epub+zip",
      is_system_book: true,
      is_public: false,
      loaded_from_server: true,
      allow_scripts: false,
      has_mathml: false,
      show_ios_app_teaser: false
    };
    // ]]></script><script src="18_files/modernizr.js"></script><script>
    
      

      
        
          window.PUBLIC_ANNOTATIONS = true;
        
      

      window.MOBILE_PUBLIC_ANNOTATIONS = false;

    

    
      window.PRIVACY_CONTROL_OVERRIDE = false;
    

    
      window.PRIVACY_CONTROL_SWITCH = true;
    

    
      window.PUBLISHER_PAGES = true;
    

      window.SBO = {
        "constants": {
          "SITB_ENDPOINT": "/api/v2/sitb/",
          "SEARCH_SELECT_ENDPOINT": "/api/v2/search/select/",
          "ENABLE_ONLINE_TRAINING": false
        }
      };
  </script><link rel="canonical" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch16.xhtml"><meta name="description" content="16 Creating Visualizations with ggplot2 The ability to create visualizations (graphical representations) of data is a key step in being able to communicate information and findings to others. In this ... "><meta property="og:title" content="16 Creating Visualizations with ggplot2"><meta itemprop="isPartOf" content="/library/view/programming-skills-for/9780135159071/"><meta itemprop="name" content="16 Creating Visualizations with ggplot2"><meta property="og:url" itemprop="url" content="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch16.xhtml"><meta property="og:site_name" content="Safari"><meta property="og:image" itemprop="thumbnailUrl" content="https://learning.oreilly.com/library/cover/9780135159071/"><meta property="og:description" itemprop="description" content="16 Creating Visualizations with ggplot2 The ability to create visualizations (graphical representations) of data is a key step in being able to communicate information and findings to others. In this ... "><meta itemprop="inLanguage" content="en"><meta itemprop="publisher" content="Addison-Wesley Professional"><meta property="og:type" content="book"><meta property="og:book:isbn" itemprop="isbn" content="9780135159071"><meta property="og:book:author" itemprop="author" content="Michael Freeman"><meta property="og:book:author" itemprop="author" content="Joel Ross"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@safari"><style type="text/css" id="font-styles" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-size: &lt;%= font_size %&gt; !important; }">
        
            
              #sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-size: 1.2em !important; }
            
        
        </style><style type="text/css" id="font-family" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-family: &lt;%= font_family %&gt; !important; }"></style><style type="text/css" id="column-width" data-template="#sbo-rt-content { max-width: &lt;%= column_width %&gt;% !important; margin: 0 auto !important; }"></style><noscript><meta http-equiv="refresh" content="0; url=/library/no-js/" /></noscript><script type="text/javascript">
    (function(i,s,o,g,r,a,m) {
      i['GoogleAnalyticsObject']=r;
      i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();
      a=s.createElement(o),m=s.getElementsByTagName(o)[0];
      a.async=1;
      a.src=g;
      m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    var matches = document.cookie.match(/BrowserCookie\s*=\s*([a-f0-9\-]{36})/),
      user_uuid = null;

    if (matches && matches.length === 2) {
      user_uuid = matches[1];
    }

  
    ga('create', 'UA-39299553-7', {'userId': '84c171ee-4dd7-4bd0-a2bc-254287669aaa' });
  

  
    
      ga('set', 'dimension1', 'B2B');
    
  

  ga('set', 'dimension6', user_uuid);

  
    ga('set', 'dimension2', '84c171ee-4dd7-4bd0-a2bc-254287669aaa');
    
      ga('set', 'dimension7', '0014100001uibI4AAI');
    
  

  

  

  //enable enhanced link tracking
  ga('require', 'linkid', 'linkid.js');

  // reading interface will track pageviews itself
  if (document.location.pathname.indexOf("/library/view") !== 0) {
    ga('send', 'pageview');
  }
  </script><script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5P4V6Z');
  </script><script defer="defer" src="18_files/vendor.js"></script><script defer="defer" src="18_files/reader.js"></script><script async="" src="18_files/MathJax.js"></script><style id="annotator-dynamic-style">.annotator-adder, .annotator-outer, .annotator-notice {
  z-index: 100019;
}
.annotator-filter {
  z-index: 100009;
}</style></head>


<body class="reading sidenav nav-collapsed  scalefonts day-mode library">

    
  <noscript> 
    <iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P4V6Z"
            height="0" width="0"
            style="display:none;visibility:hidden">
    </iframe>
  </noscript>



    
      <div class="working hide" role="status">
        <div class="working-image"></div>
      </div>
      <div class="sbo-site-nav">
        





<a href="#container" class="skip">Skip to content</a><header class="topbar t-topbar"><nav role="navigation" class="js-site-nav"><ul class="topnav"><li class="t-logo"><a href="https://learning.oreilly.com/home/" class="l0 None safari-home nav-icn js-keyboard-nav-home"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" version="1.1" fill="#4A3C31"><desc>Safari Home Icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 9.9L4 9.9 4 18 16 18 16 9.9 10 4 4 9.9ZM2.6 8.1L2.6 8.1 8.7 1.9 10 0.5 11.3 1.9 17.4 8.1 18 8.7 18 9.5 18 18.1 18 20 16.1 20 3.9 20 2 20 2 18.1 2 9.5 2 8.7 2.6 8.1Z"></path><rect x="10" y="12" width="3" height="7"></rect><rect transform="translate(18.121320, 10.121320) rotate(-315.000000) translate(-18.121320, -10.121320) " x="16.1" y="9.1" width="4" height="2"></rect><rect transform="translate(2.121320, 10.121320) scale(-1, 1) rotate(-315.000000) translate(-2.121320, -10.121320) " x="0.1" y="9.1" width="4" height="2"></rect></g></svg><span>Safari Home</span></a></li><li><a href="https://learning.oreilly.com/r/" class="t-recommendations-nav l0 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>recommendations icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M50 25C50 18.2 44.9 12.5 38.3 11.7 37.5 5.1 31.8 0 25 0 18.2 0 12.5 5.1 11.7 11.7 5.1 12.5 0 18.2 0 25 0 31.8 5.1 37.5 11.7 38.3 12.5 44.9 18.2 50 25 50 31.8 50 37.5 44.9 38.3 38.3 44.9 37.5 50 31.8 50 25ZM25 3.1C29.7 3.1 33.6 6.9 34.4 11.8 30.4 12.4 26.9 15.1 25 18.8 23.1 15.1 19.6 12.4 15.6 11.8 16.4 6.9 20.3 3.1 25 3.1ZM34.4 15.6C33.6 19.3 30.7 22.2 27.1 22.9 27.8 19.2 30.7 16.3 34.4 15.6ZM22.9 22.9C19.2 22.2 16.3 19.3 15.6 15.6 19.3 16.3 22.2 19.2 22.9 22.9ZM3.1 25C3.1 20.3 6.9 16.4 11.8 15.6 12.4 19.6 15.1 23.1 18.8 25 15.1 26.9 12.4 30.4 11.8 34.4 6.9 33.6 3.1 29.7 3.1 25ZM22.9 27.1C22.2 30.7 19.3 33.6 15.6 34.4 16.3 30.7 19.2 27.8 22.9 27.1ZM25 46.9C20.3 46.9 16.4 43.1 15.6 38.2 19.6 37.6 23.1 34.9 25 31.3 26.9 34.9 30.4 37.6 34.4 38.2 33.6 43.1 29.7 46.9 25 46.9ZM27.1 27.1C30.7 27.8 33.6 30.7 34.4 34.4 30.7 33.6 27.8 30.7 27.1 27.1ZM38.2 34.4C37.6 30.4 34.9 26.9 31.3 25 34.9 23.1 37.6 19.6 38.2 15.6 43.1 16.4 46.9 20.3 46.9 25 46.9 29.7 43.1 33.6 38.2 34.4Z"></path></g></svg><span>Recommended</span></a></li><li><a href="https://learning.oreilly.com/playlists/" class="t-queue-nav l0 nav-icn None"><!--?xml version="1.0" encoding="UTF-8"?--><svg width="21px" height="17px" viewBox="0 0 21 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink"><!-- Generator: Sketch 46.2 (44496) - http://www.bohemiancoding.com/sketch --><title>icon_Playlist_sml</title><desc>Created with Sketch.</desc><defs></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="icon_Playlist_sml" fill-rule="nonzero" fill="#000000"><g id="playlist-icon"><g id="Group-6"><rect id="Rectangle-path" x="5" y="0" width="16" height="3" rx="0.5"></rect><circle id="Oval" cx="1.5" cy="1.5" r="1.5"></circle></g><g id="Group-5" transform="translate(0.000000, 7.000000)"><circle id="Oval" cx="1.5" cy="1.5" r="1.5"></circle><rect id="Rectangle-path" x="5" y="0" width="16" height="3" rx="0.5"></rect></g><g id="Group-5-Copy" transform="translate(0.000000, 14.000000)"><circle id="Oval" cx="1.5" cy="1.5" r="1.5"></circle><rect id="Rectangle-path" x="5" y="0" width="16" height="3" rx="0.5"></rect></g></g></g></g></svg><span>
               Playlists
            </span></a></li><li class="search"><a href="#" class="t-search-nav trigger nav-icn l0" data-dropdown-selector=".searchbox"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>search icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M31.3 0C20.9 0 12.5 8.4 12.5 18.8 12.5 22.5 13.6 25.9 15.4 28.8L1.2 42.9C-0.4 44.5-0.4 47.2 1.2 48.8 2 49.6 3.1 50 4.2 50 5.2 50 6.3 49.6 7.1 48.8L21.2 34.6C24.1 36.5 27.5 37.5 31.3 37.5 41.6 37.5 50 29.1 50 18.8 50 8.4 41.6 0 31.3 0ZM31.3 31.3C24.4 31.3 18.8 25.6 18.8 18.8 18.8 11.9 24.4 6.3 31.3 6.3 38.1 6.3 43.8 11.9 43.8 18.8 43.8 25.6 38.1 31.3 31.3 31.3Z"></path></g></svg><span>Search</span></a></li><li class="usermenu dropdown"><a href="#" class="trigger l0 nav-icn nav-dropdown"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" version="1.1" fill="#4A3C31"><desc>navigation arrow</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M0.1 12.5L9.7 3.1C9.8 3 9.9 3 10 3 10.1 3 10.2 3 10.3 3.1L19.9 12.5C20 12.5 20 12.6 20 12.8 20 12.9 20 13 19.9 13L17 15.9C16.9 16 16.8 16 16.7 16 16.5 16 16.4 16 16.4 15.9L10 9.7 3.6 15.9C3.6 16 3.5 16 3.3 16 3.2 16 3.1 16 3 15.9L0.1 13C0 12.9 0 12.8 0 12.7 0 12.7 0 12.6 0.1 12.5Z"></path></g></svg><span>Expand Nav</span></a><div class="drop-content"><ul><li><a href="https://learning.oreilly.com/history/" class="t-recent-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>recent items icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 0C11.2 0 0 11.2 0 25 0 38.8 11.2 50 25 50 38.8 50 50 38.8 50 25 50 11.2 38.8 0 25 0ZM6.3 25C6.3 14.6 14.6 6.3 25 6.3 35.4 6.3 43.8 14.6 43.8 25 43.8 35.4 35.4 43.8 25 43.8 14.6 43.8 6.3 35.4 6.3 25ZM31.8 31.5C32.5 30.5 32.4 29.2 31.6 28.3L27.1 23.8 27.1 12.8C27.1 11.5 26.2 10.4 25 10.4 23.9 10.4 22.9 11.5 22.9 12.8L22.9 25.7 28.8 31.7C29.2 32.1 29.7 32.3 30.2 32.3 30.8 32.3 31.3 32 31.8 31.5Z"></path></g></svg><span>History</span></a></li><li><a href="https://learning.oreilly.com/topics" class="t-topics-link l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 55" width="20" height="20" version="1.1" fill="#4A3C31"><desc>topics icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 55L50 41.262 50 13.762 25 0 0 13.762 0 41.262 25 55ZM8.333 37.032L8.333 17.968 25 8.462 41.667 17.968 41.667 37.032 25 46.538 8.333 37.032Z"></path></g></svg><span>Topics</span></a></li><li><a href="https://learning.oreilly.com/learning-paths/" class="l1 nav-icn t-learningpaths-nav js-toggle-menu-item"><!--?xml version="1.0" encoding="UTF-8"?--><svg width="32px" height="32px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink"><!-- Generator: Sketch 52.5 (67469) - http://www.bohemiancoding.com/sketch --><title>Mask</title><desc>Created with Sketch.</desc><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><path d="M0,16.0214227 C0,15.0387209 0.796453294,14.2411658 1.77779753,14.2411658 C2.75914177,14.2411658 3.55559506,15.0387209 3.55559506,16.0214227 C3.55559506,17.0041246 2.75914177,17.8016797 1.77779753,17.8016797 C0.796453294,17.8016797 0,17.0041246 0,16.0214227 Z M9.77788642,5.22914885 C8.9280992,5.72049977 7.84008711,5.42853763 7.34941499,4.57757479 C6.85874287,3.72661195 7.15030167,2.63709467 8.00008889,2.14574375 C8.84987611,1.65439282 9.9378882,1.94635496 10.4285603,2.7973178 C10.9192324,3.64828064 10.6276736,4.73779792 9.77788642,5.22914885 Z M4.57213969,7.35869225 C5.42192691,7.85004318 5.71348571,8.93956046 5.22281359,9.79052329 C4.73214147,10.6414861 3.64412938,10.9334483 2.79434216,10.4420974 C1.94455494,9.95074642 1.65299614,8.86122915 2.14366826,8.01026631 C2.63434038,7.15930347 3.72235247,6.86734132 4.57213969,7.35869225 Z M2.79434216,21.6007481 C3.64412938,21.1093972 4.73214147,21.4013594 5.22281359,22.2523222 C5.71348571,23.103285 5.42192691,24.1928023 4.57213969,24.6841532 C3.72235247,25.1755042 2.63434038,24.883542 2.14366826,24.0325792 C1.65299614,23.1816163 1.94455494,22.0920991 2.79434216,21.6007481 Z M7.34941499,27.4652707 C7.84008711,26.6143079 8.9280992,26.3223457 9.77788642,26.8136966 C10.6276736,27.3050476 10.9192324,28.3945649 10.4285603,29.2455277 C9.9378882,30.0964905 8.84987611,30.3884527 8.00008889,29.8971017 C7.15030167,29.4057508 6.85874287,28.3162335 7.34941499,27.4652707 Z M18.7118524,11.3165596 C21.3074367,12.8173162 22.1963355,16.1392758 20.6976522,18.738451 C19.1989689,21.3358459 15.8815987,22.2259744 13.2860143,20.726998 C10.6922077,19.2262414 9.80330893,15.9042818 11.3002144,13.3051066 C12.7988978,10.7059314 16.116268,9.81580294 18.7118524,11.3165596 Z M26.7821642,27.8093944 L30.1315348,31.1633985 C30.3982044,31.4304371 30.2097579,31.8844026 29.8346426,31.8844026 L21.5945511,31.8844026 C21.1287681,31.8844026 20.751875,31.5069881 20.751875,31.0405608 L20.751875,22.7890697 C20.751875,22.4134355 21.2052134,22.2247282 21.4701052,22.4899865 L24.2843587,25.3081333 C26.8337204,23.0240636 28.4444049,19.7092251 28.4444049,16.0223129 C28.4444049,9.15052091 22.8621207,3.56051397 15.9998222,3.56051397 L15.9998222,0 C24.8230314,0 32,7.18689745 32,16.0223129 C32,20.6919269 29.9750886,24.8790914 26.7821642,27.8093944 Z" id="Mask" fill="#8B889A"></path></g></svg><span>Learning Paths</span></a></li><li class="nav-highlights"><a href="https://learning.oreilly.com/u/84c171ee-4dd7-4bd0-a2bc-254287669aaa/" class="t-highlights-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 35" width="20" height="20" version="1.1" fill="#4A3C31"><desc>highlights icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M13.325 18.071L8.036 18.071C8.036 11.335 12.36 7.146 22.5 5.594L22.5 0C6.37 1.113 0 10.632 0 22.113 0 29.406 3.477 35 10.403 35 15.545 35 19.578 31.485 19.578 26.184 19.578 21.556 17.211 18.891 13.325 18.071L13.325 18.071ZM40.825 18.071L35.565 18.071C35.565 11.335 39.86 7.146 50 5.594L50 0C33.899 1.113 27.5 10.632 27.5 22.113 27.5 29.406 30.977 35 37.932 35 43.045 35 47.078 31.485 47.078 26.184 47.078 21.556 44.74 18.891 40.825 18.071L40.825 18.071Z"></path></g></svg><span>Highlights</span></a></li><li><a href="https://learning.oreilly.com/u/preferences/" class="t-settings-nav l1 js-settings nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" width="20" height="20" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z"></path></g></svg><span>Settings</span></a></li><li><a href="https://www.oreilly.com/online-learning/support/" class="l1 no-icon">Support</a></li><li><a href="https://learning.oreilly.com/accounts/logout/" class="l1 no-icon">Sign Out</a></li></ul><ul class="profile"><li><a href="https://learning.oreilly.com/u/preferences/" class="l2 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" width="20" height="20" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z"></path></g></svg><span>Settings</span></a></li><li><a href="https://www.oreilly.com/online-learning/support/" class="l2">Support</a></li><li><a href="https://learning.oreilly.com/accounts/logout/" class="l2">Sign Out</a></li></ul></div></li></ul></nav></header>


      </div>
      <div id="container" class="application" style="height: auto;">
        
          <div class="nav-container clearfix">
            


            
            
          </div>

          

  <div class="js-toc">
    
      <div class="sbo-reading-menu sbo-menu-top"><section class="sbo-toc-container toc-menu"><a href="#" class="sbo-toc-thumb"><span class="sbo-title ss-list"><h1><div class="visuallyhidden">Table of Contents for </div>
      
      Programming Skills for Data Science: Start Writing Code to Wrangle, Analyze, and Visualize Data with R, First Edition
      
    </h1></span></a><div class="toc-contents" style="max-height: 0px;">
  <div class="sbo-toc ">
    <button type="button" class="sbo-toc-thumb close"><div class="visuallyhidden">Close</div></button>
      <section class="ios-app-teaser">
        <ul>
            <li><a class="js-toc-link toc-link" href="https://itunes.apple.com/gb/app/safari-queue-library-over/id881697395?mt=8" role="button">Install App</a></li>
            <li><a class="js-toc-link toc-link" href="safaridetail://9780135159071" role="button">Open in App</a></li>
        </ul>
      </section>
      <div class="sbo-book-meta">
        
        <span class="cover">
         <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/">
          <img src="18_files/a.jpg" alt="Cover image for Programming Skills for Data Science: Start Writing Code to Wrangle, Analyze, and Visualize Data with R, First Edition" width="139" height="184">
        </a>
        </span>
        <span class="title">
          
            
                <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/publisher/addison-wesley-professional/">
                  <img src="18_files/addison-wesley.png" class="publisher-logo video" alt="publisher logo">
                </a>
            
          

          <a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/">Programming Skills for Data Science: Start Writing Code to Wrangle, Analyze, and Visualize Data with R, First Edition</a>
        </span>
        
        <span class="authors">by Michael Freeman; Joel Ross</span>
        

        
        <span class="publishers t-publishers">Published by
          <!-- Show publisher page link if publisher pages switch is on -->
          
            <a class="t-publisher-link toc-link js-toc-link" href="https://learning.oreilly.com/library/publisher/addison-wesley-professional/">
              Addison-Wesley Professional</a>, 2018
          
        </span>
        

    

    </div>
  <ol class="tocList">
    
    
    
     

     <li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/cover.xhtml">
        Cover Page <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/pref00.xhtml">
        About This E-Book <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/title.xhtml">
        Title Page <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/copyright.xhtml">
        Copyright Page <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ded01.xhtml">
        Dedication Page <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/toc.xhtml">
        Contents <span class="minutes">(03:27 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/pref02.xhtml">
        Foreword <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/pref03.xhtml">
        Preface <span class="minutes">(09:12 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/pref04.xhtml">
        Acknowledgments <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/pref05.xhtml">
        About the Authors <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/part01.xhtml">
        I Getting Started <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     
     <ul class="toc-level-2">
     

     <li class="toc-level2">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch01.xhtml">
        1 Setting Up Your Computer <span class="minutes">(11:30 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level2">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch02.xhtml#ch02">
        2 Using the Command Line 
       </a>
      
        
      
    
    
    </li></ul>
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/part02.xhtml">
        II Managing Projects <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     
     <ul class="toc-level-2">
     

     <li class="toc-level2">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch03.xhtml#ch03">
        3 Version Control with git and GitHub 
       </a>
      
        
      
    
    
     

     </li><li class="toc-level2">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch04.xhtml#ch04">
        4 Using Markdown for Documentation 
       </a>
      
        
      
    
    
    </li></ul>
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/part03.xhtml">
        III Foundational R Skills <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     
     <ul class="toc-level-2">
     

     <li class="toc-level2">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch05.xhtml#ch05">
        5 Introduction to R 
       </a>
      
        
      
    
    
     

     </li><li class="toc-level2">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch06.xhtml#ch06">
        6 Functions 
       </a>
      
        
      
    
    
     

     </li><li class="toc-level2">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch07.xhtml#ch07">
        7 Vectors 
       </a>
      
        
      
    
    
     

     </li><li class="toc-level2">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch08.xhtml#ch08">
        8 Lists 
       </a>
      
        
      
    
    
    </li></ul>
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/part04.xhtml">
        IV Data Wrangling <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     
     <ul class="toc-level-2">
     

     <li class="toc-level2">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch09.xhtml#ch09">
        9 Understanding Data 
       </a>
      
        
      
    
    
     

     </li><li class="toc-level2">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch10.xhtml#ch10">
        10 Data Frames 
       </a>
      
        
      
    
    
     

     </li><li class="toc-level2">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch11.xhtml#ch11">
        11 Manipulating Data with dplyr 
       </a>
      
        
      
    
    
     

     </li><li class="toc-level2">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch12.xhtml#ch12">
        12 Reshaping Data with tidyr 
       </a>
      
        
      
    
    
     

     </li><li class="toc-level2">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch13.xhtml#ch13">
        13 Accessing Databases 
       </a>
      
        
      
    
    
     

     </li><li class="toc-level2">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch14.xhtml#ch14">
        14 Accessing Web APIs 
       </a>
      
        
      
    
    
    </li></ul>
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/part05.xhtml">
        V Data Visualization <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     
     <ul class="toc-level-2">
     

     <li class="toc-level2">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch15.xhtml#ch15">
        15 Designing Data Visualizations 
       </a>
      
        
      
    
    
     

     </li><li class="toc-level2 currently-reading">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch16.xhtml#ch16">
        16 Creating Visualizations with ggplot2 
       </a>
      
        
      
    
    
     

     </li><li class="toc-level2">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch17.xhtml#ch17">
        17 Interactive Visualization in R 
       </a>
      
        
      
    
    
    </li></ul>
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/part06.xhtml">
        VI Building and Sharing Applications <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     
     <ul class="toc-level-2">
     

     <li class="toc-level2">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#ch18">
        18 Dynamic Reports with R Markdown 
       </a>
      
        
      
    
    
     

     </li><li class="toc-level2">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch19.xhtml#ch19">
        19 Building Interactive Web Applications with Shiny 
       </a>
      
        
      
    
    
     

     </li><li class="toc-level2">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch20.xhtml#ch20">
        20 Working Collaboratively 
       </a>
      
        
      
    
    
     

     </li><li class="toc-level2">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch21.xhtml#ch21">
        21 Moving Forward 
       </a>
      
        
      
    
    
    </li></ul>
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/index.xhtml">
        Index <span class="minutes">(32:12 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/app01.xhtml">
        Credits <span class="minutes">(04:36 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/pref03_images.xhtml#pref03_images">
        Code Snippets 
       </a>
      
        
      
   </li></ol>
 </div>



</div></section></div>

    

    <div class="interface-controls interface-controls-top">
      <ul class="interface-control-btns js-bitlist js-reader">
        <li class="js-search-in-archive search-in-archive t-search-in-archive"><a href="#" title="Search in archive" class="js-search-controls search-controls"><span class="icon">Search in book...</span></a><form class="search-archive-bar js-search-form"><input type="search" name="query" placeholder="Search inside this book..." autocomplete="off"></form><div class="search-archive-results"><div class="js-sitb-results-region"></div></div></li><li class="queue-control"><div class="js-content-uri" data-content-uri="/api/v1/book/9780135159071/chapter/ch16.xhtml"><div class="js-collections-dropdown collections-dropdown menu-bit-cards"><div data-reactroot="" class="menu-dropdown-wrapper js-menu-dropdown-wrapper align-right"><img class="hidden" src="18_files/ajax-transp.gif" alt="loading spinner"><div class="menu-control"><div class="control "><div class="js-playlists-menu"><button class="js-playlist-icon"><svg class="icon-add-to-playlist-sml" viewBox="0 0 16 14" version="1.1" xmlns="http://www.w3.org/2000/svg"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g fill-rule="nonzero" fill="#000000"><g transform="translate(-1.000000, 0.000000)"><rect x="5" y="0" width="12" height="2"></rect><title>Playlists</title><path d="M4.5,14 C6.43299662,14 8,12.4329966 8,10.5 C8,8.56700338 6.43299662,7 4.5,7 C2.56700338,7 1,8.56700338 1,10.5 C1,12.4329966 2.56700338,14 4.5,14 Z M2.5,10 L4,10 L4,8.5 L5,8.5 L5,10 L6.5,10 L6.5,11 L5,11 L5,12.5 L4,12.5 L4,11 L2.5,11 L2.5,10 Z"></path><circle cx="2" cy="5" r="1"></circle><circle cx="1.94117647" cy="1" r="1"></circle><rect x="5" y="4" width="12" height="2"></rect><rect x="9" y="8" width="8" height="2"></rect><rect x="9" y="12" width="8" height="2"></rect></g></g></g></svg><div class="js-playlist-addto-label">Add&nbsp;To</div></button></div></div></div></div></div></div></li><li class="js-font-control-panel font-control-activator"><a href="#" data-push-state="false" id="font-controls" title="Change font size" aria-label="Change font size"><span class="icon">Toggle Font Controls</span></a></li><li class="dropdown sharing-controls"><a href="#" class="trigger" data-push-state="false" title="Share" aria-label="Share"><i class="fa fa-share"></i></a><ul class="social-sharing dropdown-menu"><li class="currently-reading"><a class="twitter share-button t-twitter" target="_blank" aria-label="Share this section on Twitter" title="Share this section on Twitter" href="https://twitter.com/share?url=https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch16.xhtml&amp;text=Programming%20Skills%20for%20Data%20Science%3A%20Start%20Writing%20Code%20to%20Wrangle%2C%20Analyze%2C%20and%20Visualize%20Data%20with%20R%2C%20First%20Edition&amp;via=safari"><span>Twitter</span></a></li><li class="currently-reading"><a class="facebook share-button t-facebook" target="_blank" aria-label="Share this section on Facebook" title="Share this section on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch16.xhtml"><span>Facebook</span></a></li><li class="currently-reading"><a class="googleplus share-button t-googleplus" target="_blank" aria-label="Share this secton on Google Plus" title="Share this secton on Google Plus" href="https://plus.google.com/share?url=https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch16.xhtml"><span>Google Plus</span></a></li><li class="currently-reading"><a class="email share-button t-email" aria-label="Share this section via email" title="Share this section via email" href="mailto:?subject=Safari: 16%20Creating%20Visualizations%20with%20ggplot2&amp;body=https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch16.xhtml%0D%0Afrom Programming%20Skills%20for%20Data%20Science%3A%20Start%20Writing%20Code%20to%20Wrangle%2C%20Analyze%2C%20and%20Visualize%20Data%20with%20R%2C%20First%20Edition%0D%0A"><span>Email</span></a></li></ul></li>
      </ul>
    </div>

    <section role="document">
	  <div class="t-sbo-prev sbo-prev sbo-nav-top">
  
    
      
        <a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/part06.xhtml" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">VI Building and Sharing Applications</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-top">
  
    
      
        <a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch19.xhtml" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">19 Building Interactive Web Applications with Shiny</div>
        </a>
    
  
  </div>



<div id="sbo-rt-content"><div class="annotator-wrapper"><h2 class="h2" id="ch18"><span epub:type="pagebreak" id="page_275"></span><span class="big">18</span><br>Dynamic Reports with R Markdown</h2>
<p class="noindent">The insights you discover through your analysis are 
only valuable if you can share them with others. To do this, it’s 
important to have a simple, repeatable process for combining the set of 
charts, tables, and statistics you generate into an easily presentable 
format.</p>
<p class="noindent">This chapter introduces <strong>R Markdown</strong><a id="ch18fn1a" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#ch18fn1" class="totri-footnote"><sup>1</sup></a> as a tool for compiling and sharing your results. R Markdown is a development framework that supports using <code>R</code> to dynamically create documents, such as websites (<code>.html</code> files), reports (<code>.pdf</code> files), and even slideshows (using <code>ioslides</code> or <code>slidy</code>).</p>
<p class="footnote"><a id="ch18fn1" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#ch18fn1a" class="totri-footnote"><sup>1</sup></a><strong>R Markdown</strong>: <a href="https://rmarkdown.rstudio.com/">https://rmarkdown.rstudio.com</a></p>
<p class="noindent">As you may have guessed, R Markdown does this by providing the ability to blend Markdown syntax and <code>R</code>
 code so that, when compiled and executed, the results from your code 
will be automatically injected into a formatted document. The ability to
 automatically generate reports and documents from a computer script 
eliminates the need to manually update the results of a data analysis 
project, enabling you to more effectively share the information that 
you’ve produced from your data. In this chapter, you will learn the 
fundamentals of the R Markdown package so that you can create 
well-formatted documents that combine analysis and reporting.</p>
<div class="note-b">
<p class="title">Fun Fact</p>
<p class="notepara">This book was written using R Markdown!</p>
</div>
<div class="heading">
<h3 class="h3z" id="sec18_1">18.1 Setting Up a Report</h3>
<p class="noindent">R Markdown documents are created from a combination of two packages: <code><strong>rmarkdown</strong></code> (which processes the markdown and generates the output) and <code><strong>knitr</strong></code><a id="ch18fn2a" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#ch18fn2" class="totri-footnote"><sup>2</sup></a> (which runs <code>R</code>
 code and produces Markdown-like output). These packages are produced by
 and already included in RStudio, which provides direct support for 
creating and viewing R Markdown documents.</p>
</div>
<p class="footnote"><a id="ch18fn2" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#ch18fn2a" class="totri-footnote"><sup>2</sup></a><code><strong>knitr</strong></code> package: <a href="https://yihui.name/knitr/">https://yihui.name/knitr/</a></p>
<div class="heading">
<h4 id="sec18_1_1"><span epub:type="pagebreak" id="page_276"></span>18.1.1 Creating <code><strong>.Rmd</strong></code> Files</h4>
<p class="noindent">The easiest way to create a new R Markdown document in RStudio is to use the <code>File &gt; New File &gt; R Markdown</code> menu option (see <a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#fig18_1">Figure 18.1</a>), which opens a document creation wizard.</p>
</div>
<figure id="fig18_1">
<img src="18_files/18fig01.jpg" aria-describedby="alt_18fig01" alt="A screenshot shows how to create a new R Markdown document in RStudio." data-mfp-src="/library/view/programming-skills-for/9780135159071/graphics/18fig01.jpg" width="401" height="259">
<figcaption><span class="pd_ash">Figure 18.1</span> Create a new R Markdown document in RStudio via the dropdown menu (<code>File &gt; New File &gt; R Markdown</code>).
<aside class="hidden" id="alt_18fig01">
<p>In the screenshot, the New File option is selected under the File 
menu. The New File option displays a list of submenus in which R 
Markdown option is selected.</p>
</aside>
</figcaption>
</figure>
<p class="noindent">RStudio will then prompt you to provide some 
additional details about what kind of R Markdown document you want to 
create (shown in <a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#fig18_2">Figure 18.2</a>).
 In particular, you will need to choose a default document type and 
output format. You can also provide a title and author information that 
will be included in the document. This chapter focuses on creating HTML 
documents (websites, the default format); other formats require the 
installation of additional software.</p>
<figure id="fig18_2">
<img src="18_files/18fig02.jpg" aria-describedby="alt_18fig02" alt="A screenshot shows RStudio wizard for creating R Markdown documents." data-mfp-src="/library/view/programming-skills-for/9780135159071/graphics/18fig02.jpg" width="575" height="452">
<figcaption><span class="pd_ash">Figure 18.2</span> RStudio wizard for 
creating R Markdown documents. Enter a Title and Author, and select the 
document output format (we suggest HTML to start).
<aside class="hidden" id="alt_18fig02">
<p>In the New R Markdown screen, the Document option is selected that 
displays the Title and Author text box to be entered, and the HTML radio
 button is selected under the Default Output Format. Two buttons, OK 
(selected) and Cancel are shown at the bottom.</p>
</aside>
</figcaption>
</figure>
<p class="noindent"><span epub:type="pagebreak" id="page_277"></span>Once
 you’ve chosen your desired document type and output format, RStudio 
will open up a new script file for you. You should save this file with 
the extension <code><strong>.Rmd</strong></code> (for “R Markdown”), which tells the computer and RStudio that the document contains Markdown content with embedded <code>R</code> code. If you use a different extension, RStudio won’t know how to interpret the code and render the output!</p>
<p class="noindent">The wizard-generated file contains some example code
 demonstrating how to write an R Markdown document. Understanding the 
basic structure of this file will enable you to insert your own content 
into this structure.</p>
<p class="noindent">A <code>.Rmd</code> file has three major types of content: the header, the Markdown content, and R code chunks.</p>
<ul>
<li><p class="bullet">The <strong>header</strong> is found at the top of the file, and includes text with the following format:</p>
<pre class="pre"><span class="pd_maroon1">---</span>
title: <span class="pd_green1">"EXAMPLE_TITLE"</span>
author: <span class="pd_green1">"YOUR_NAME"</span>
date: <span class="pd_green1">"2/01/2018"</span>
output: <span class="pd_ora1">html_document</span>
<span class="pd_maroon1">---</span></pre>
<p class="noindent">This header is written in <em>YAML</em><a id="ch18fn3a" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#ch18fn3" class="totri-footnote"><sup>3</sup></a> format, which is <em>yet another</em>
 way of formatting structured data, similar to CSV or JSON. In fact, 
YAML is a superset of JSON and can represent the same data structures, 
just using indentation and dashes instead of braces and commas.</p>
<p class="footnote"><a id="ch18fn3" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#ch18fn3a" class="totri-footnote"><sup>3</sup></a><strong>YAML</strong>: <a href="http://yaml.org/">http://yaml.org</a></p>
<p class="noindent">The header contains <strong>meta-data</strong>, or information about the file and how it should be processed and rendered. For example, the <code>title</code>, <code>author</code>, and <code>date</code>
 will be automatically included and displayed at the top of your 
generated document. You can include additional information and 
configuration options as well, such as whether there should be a table 
of contents. See the R Markdown documentation<a id="ch18fn4a" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#ch18fn4" class="totri-footnote"><sup>4</sup></a> for further details.</p>
<p class="footnote"><a id="ch18fn4" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#ch18fn4a" class="totri-footnote"><sup>4</sup></a><strong>R Markdown HTML Documents</strong>: <a href="http://rmarkdown.rstudio.com/html_document_format.html">http://rmarkdown.rstudio.com/html_document_format.html</a></p></li>
<li><p class="bullet">Everything below the header is the content that will be included in your report, and is primarily made up of <strong>Markdown content</strong>. This is normal Markdown text like that described in <a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch04.xhtml#ch04">Chapter 4</a>. For example, you could include the following markdown code in your <code>.Rmd</code> file:</p>
<p class="codelink"><a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18_images.xhtml#p0277-02a" id="p0277-02">Click here to view code image</a></p>
<pre class="pre"><span class="pd_maroon1">## Second Level Header</span>
This is just plain markdown that can contain **bold** or _italics_.</pre>
<p class="bullet-para">R Markdown also provides the ability to render code content <em>inline</em> with the Markdown content, as described later in this chapter.</p></li>
<li><p class="bullet"><strong>R code chunks</strong> can be included in the middle of the regular Markdown content. These segments (chunks) of <code>R</code> code look like normal code block elements (using three backticks <code><strong>```</strong></code>), but with an extra <code><strong>{r}</strong></code> immediately after the opening set of backticks. Inside these code chunks you include regular <code>R</code> code, which will be evaluated and then rendered <span epub:type="pagebreak" id="page_278"></span>into the document. <a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#sec18_2">Section 18.2</a> provides more details about the format and process used by these chunks.</p>
<p class="codelink"><a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18_images.xhtml#p0278-01a" id="p0278-01">Click here to view code image</a></p>
<pre class="pre">```{r}
<span class="pd_maroon1"># R code chunk in an R Markdown file</span>
some_variable &lt;- <span class="pd_blue">100</span>
```</pre></li>
</ul>
<p class="noindent">Combining these content types (header, markdown, and
 code chunks), you will be able to reproducibly create documents to 
share your insights.</p>
<div class="heading">
<h4 id="sec18_1_2">18.1.2 Knitting Documents</h4>
<p class="noindent">RStudio provides a direct interface to compile your <code>.Rmd</code> source code into an actual document (a process called <strong>knitting</strong>, performed by the <code>knitr</code> package). To do so, click the <strong>Knit</strong> button at the top of the script panel, shown in <a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#fig18_3">Figure 18.3</a>. This button will compile the code and generate the document (into the same directory as your saved <code>.Rmd</code> file), as well as open up a preview window in RStudio.</p>
</div>
<figure id="fig18_3">
<img src="18_files/18fig03.jpg" alt="A screenshot shows the Script editor of RStudio, where, the &quot;Knit&quot; tool above the editing area is marked and highlighted." data-mfp-src="/library/view/programming-skills-for/9780135159071/graphics/18fig03.jpg" width="701" height="150">
<figcaption><span class="pd_ash">Figure 18.3</span> Click on RStudio’s Knit button to compile your code to the desired document type (e.g., HTML).</figcaption>
</figure>
<p class="noindent">While it is straightforward to generate such documents, the knitting process can make it hard to debug errors in your <code>R</code>
 code (whether syntax or logical), in part because the output may or may
 not show up in the document! We suggest that you write complex <code>R</code> code in another script and then use the <code>source()</code> function to insert that script into your <code>.Rmd</code> file and use calculated variables in your output (see <a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch14.xhtml#ch14">Chapter 14</a> for details and examples of the <code>source()</code> function). This makes it possible to test your data processing work outside of the knitted document. It also <strong>separates the concerns</strong> of the data and its representation—which is good programming practice.</p>
<p class="noindent">Nevertheless, you should be sure to knit your 
document frequently, paying close attention to any errors that appear in
 the console.</p>
<div class="note-g">
<p class="title">Tip</p>
<p class="notepara">If you’re having trouble finding your error, a good 
strategy is to systematically remove (“comment out”) segments of your 
code and attempt to re-knit the document. This will help you identify 
the problematic syntax.</p>
</div>
<div class="heading">
<h3 class="h3z" id="sec18_2"><span epub:type="pagebreak" id="page_279"></span>18.2 Integrating Markdown and <code><strong>R</strong></code> Code</h3>
<p class="noindent">What makes R Markdown distinct from simple Markdown code is the ability to actually execute your <code>R</code> code and include the output directly in the document. <code>R</code> code can be executed and included in the document in blocks of code, or even inline with other content!</p>
</div>
<div class="heading">
<h4 id="sec18_2_1">18.2.1 <code><strong>R</strong></code> Code Chunks</h4>
<p class="noindent">Code that is to be executed (rather than just displayed as formatted text) is called a <strong>code chunk</strong>. To specify a code chunk, you need to include <code><strong>{r}</strong></code> immediately after the backticks that start the code block (the <code><strong>```</strong></code>). You can type this out yourself, or use the keyboard shortcut (<code>cmd+alt+i</code>) to create one. For example:</p>
</div>
<p class="codelink"><a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18_images.xhtml#p0279-01a" id="p0279-01">Click here to view code image</a></p>
<pre class="pre">Write normal **markdown** out here, then create a code block:

```{r}
<span class="pd_maroon1"># Execute R code in here</span>
course_number &lt;- <span class="pd_blue">201</span>
```

Back to writing _markdown_ out here.</pre>
<p class="noindent">By default, the code chunk will execute the <code>R</code>
 code listed, and then render both the code that was executed and the 
result of the last statement into the Markdown—similar to what would be 
returned by a function. Indeed, you can think of code chunks as 
functions that calculate and return a value that will be included in the
 rendered report. If your code chunk doesn’t return a particular 
expression (e.g., the last line is just an assignment), then no returned
 output will be rendered, although R Markdown will still render the code
 that was executed.</p>
<p class="noindent">It is also possible to specify additional <strong>configuration options</strong>
 by including a comma-separated list of named arguments (as you’ve done 
with lists and functions) inside the curly braces following the <code>r</code>:</p>
<p class="codelink"><a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18_images.xhtml#p0279-02a" id="p0279-02">Click here to view code image</a></p>
<pre class="pre">```{r options_example, <span class="pd_blue">echo =</span> <span class="pd_maroon1">FALSE</span>, <span class="pd_blue">message =</span> <span class="pd_maroon1">TRUE</span>)
<span class="pd_maroon1"># A code chunk named "options_example", with argument `echo` assigned FALSE
# and argument `message` assigned TRUE</span>

<span class="pd_maroon1"># Would execute R code in here</span>
```</pre>
<p class="noindent">The first “argument” (<code>options_example</code>) is a “name” or label for the chunk; it is followed by named arguments (written in <code>option = VALUE</code>
 format) for the options. While including chunk names is technically 
optional, this practice will help you create well-documented code and 
reference results in the text. It will also help in the debugging 
process, as it will allow RStudio to produce more detailed error 
messages.</p>
<p class="noindent"><span epub:type="pagebreak" id="page_280"></span>There are many options<a id="ch18fn5a" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#ch18fn5" class="totri-footnote"><sup>5</sup></a>
 you can use when creating code chunks. Some of the most useful ones 
have to do with how the executed code is output in the document:</p>
<p class="footnote"><a id="ch18fn5" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#ch18fn5a" class="totri-footnote"><sup>5</sup></a><code><strong>knitr</strong></code> <strong>Chunk options and package options</strong>: <a href="https://yihui.name/knitr/options/">https://yihui.name/knitr/options/</a></p>
<ul>
<li><p class="bullet"><code><strong>echo</strong></code> indicates whether you want the <em>R code itself</em>
 to be displayed in the document (i.e., if you want readers to be able 
to see your work and reproduce your calculations and analysis). The 
value is either <code>TRUE</code> (do display; the default) or <code>FALSE</code> (do not display).</p></li>
<li><p class="bullet"><code><strong>message</strong></code> indicates whether you want any messages generated by the code to be displayed. <em>This includes print statements!</em> The value is either <code>TRUE</code> (do display; the default) or <code>FALSE</code> (do not display).</p></li>
<li><p class="bullet"><code><strong>include</strong></code> indicates if <em>any</em>
 results of the code should be output in the report. Note that any code 
in this chunk will still be executed—it just won’t be included in the 
output. It is extremely common and best practice to have a “setup” code 
chunk at the beginning of your report that has the <code>include = FALSE</code> option and is used to do initial processing work—such as <code>library()</code> packages, <code>source()</code>
 analysis code, or perform some other data wrangling. The R Markdown 
reports produced by RStudio’s wizard include a code chunk like this.</p></li>
</ul>
<p class="noindent">If you want to <em>show</em> your <code>R</code> code but not <em>evaluate</em> it, you can use a standard Markdown code block that indicates the <code>r</code> language (<code>```r</code> instead of <code>```{r}</code>), or set the <code>eval</code> option to <code>FALSE</code>.</p>
<div class="heading">
<h4 id="sec18_2_2">18.2.2 Inline Code</h4>
<p class="noindent">In addition to creating distinct code blocks, you will commonly want to execute <code>R</code>
 code inline with the rest of your text. This empowers you to reference a
 variable defined in a code chunk in a section of Markdown—injecting the
 value stored in a variable into the text you have written. Using this 
technique, you can include a specific result inside a paragraph of text;
 if the computation changes, re-knitting your document will update the 
values inside the text without any further work needed.</p>
</div>
<p class="noindent">Recall that a single backtick (<code><strong>`</strong></code>) is the Markdown syntax for making text display <code>as code</code>. You can make R Markdown <em>evaluate</em>—rather than display—inline code by adding the letter <code><strong>r</strong></code> and a space immediately after the first backtick. For example:</p>
<p class="codelink"><a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18_images.xhtml#p0280-01a" id="p0280-01">Click here to view code image</a></p>
<pre class="pre">To calculate 3 + 4 inside some text, you can use <span class="pd_blue">`r 3 + 4`</span> right in the _middle_.</pre>
<p class="noindent">When you knit this text, <code>`r 3 + 4`</code> would be replaced with the number <code>7</code> (what <code>3 + 4</code> evaluates to).</p>
<p class="noindent">You can also reference values computed in any code chunks that precede the inline code. For example, <code>`r SOME_VARIABLE`</code> would include the value of <code>SOME_VARIABLE</code> inline with the paragraph. In fact, it is best practice to do your calculations in a code block (with the <code>echo = FALSE</code> option), save the result in a variable, and then inline that variable to display it.</p>
<div class="note-g">
<p class="title">Tip</p>
<p class="notepara">To quickly access the R Markdown Cheatsheet and Reference, use the RStudio menu: <code>Help &gt; Cheatsheets.</code></p>
</div>
<div class="heading">
<h3 class="h3z" id="sec18_3"><span epub:type="pagebreak" id="page_281"></span>18.3 Rendering Data and Visualizations in Reports</h3>
<p class="noindent">R Markdown’s code chunks let you perform data 
analysis directly in your document, but you will often want to include 
more complex data output than just the resulting numbers. This section 
discusses a few tips for specifying dynamic, complex output to render 
using R Markdown.</p>
</div>
<div class="heading">
<h4 id="sec18_3_1">18.3.1 Rendering Strings</h4>
<p class="noindent">If you experiment with knitting R Markdown, you will quickly notice that using <code>print()</code> will generate content that looks like a printed vector (e.g., what you see in the console in RStudio). For example:</p>
</div>
<p class="codelink"><a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18_images.xhtml#p0281-01a" id="p0281-01">Click here to view code image</a></p>
<pre class="pre">```{r raw_print_example, <span class="pd_blue">echo =</span> <span class="pd_maroon1">FALSE</span>}
<span class="pd_blue"><strong>print</strong></span>(<span class="pd_green1">"Hello world"</span>)
```</pre>
<p class="noindent">will produce:</p>
<pre class="prea">## [1] "Hello world"</pre>
<p class="noindent">For this reason, you usually want to have the code 
block generate a string that you save in a variable, which you can then 
display with an inline expression (e.g., on its own line):</p>
<p class="codelink"><a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18_images.xhtml#p0281-02a" id="p0281-02">Click here to view code image</a></p>
<pre class="pre">```{r stored_print_example, <span class="pd_blue">echo =</span> <span class="pd_maroon1">FALSE</span>}
msg &lt;- <span class="pd_green1">"**Hello world**"</span>
```

Below is the message to see:

<span class="pd_blue">`r msg`</span></pre>
<p class="noindent">When <code>knit</code>, this code produces the text shown in <a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#fig18_4">Figure 18.4</a>. Note that the Markdown syntax included in the variable is rendered as well: <code>`r msg`</code>
 is replaced by the value of the expression just as if you had typed 
that Markdown in directly. This allows you to even include dynamic 
styling if you construct a “Markdown string” (i.e., containing Markdown 
syntax) from your data.</p>
<figure id="fig18_4">
<img src="18_files/18fig04.jpg" alt="A screenshot shows a preview of the html file created using the R Markdown knit tool. The output reads the string value: Hello World." data-mfp-src="/library/view/programming-skills-for/9780135159071/graphics/18fig04.jpg" width="575" height="157">
<figcaption><span class="pd_ash">Figure 18.4</span> A preview of the <code>.html</code>
 file that is created by knitting an R Markdown document containing a 
chunk that stores a message in a variable and an inline expression of 
that message.</figcaption>
</figure>
<p class="noindent"><span epub:type="pagebreak" id="page_282"></span>Alternatively, you can give your chunk a <code>results</code> option<a id="ch18fn6a" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#ch18fn6" class="totri-footnote"><sup>6</sup></a> with a value <code>"asis"</code>, which will cause the output to be rendered directly into the Markdown. When combined with the base <code>R</code> function <code><strong>cat()</strong></code> (which con<strong>cat</strong>enates
 content without specifying additional information such as vector 
position), you can make a code chunk effectively render a specific 
string:</p>
<p class="footnote"><a id="ch18fn6" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#ch18fn6a" class="totri-footnote"><sup>6</sup></a><code><strong>knitr</strong></code> <strong>text result options:</strong> <a href="https://yihui.name/knitr/options/#text-results">https://yihui.name/knitr/options/#text-results</a></p>
<p class="codelink"><a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18_images.xhtml#p0282-01a" id="p0282-01">Click here to view code image</a></p>
<pre class="pre">```{r asis_example, <span class="pd_blue">results =</span> <span class="pd_green1">"asis"</span>, <span class="pd_blue">echo =</span> <span class="pd_maroon1">FALSE</span>}
<span class="pd_blue"><strong>cat</strong></span>(<span class="pd_green1">"**Hello world**"</span>)
```</pre>
<div class="heading">
<h4 id="sec18_3_2">18.3.2 Rendering Markdown Lists</h4>
<p class="noindent">Because output strings render any Markdown they 
contain, it’s possible to construct these Markdown strings so that they 
contain more complex structures such as <strong>unordered lists</strong>. To do this, you specify the string to include the <code><strong>-</strong></code> symbols used to indicate a Markdown list (with each item in the list separated by a line break or a <code>\n</code> character):</p>
</div>
<p class="codelink"><a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18_images.xhtml#p0282-02a" id="p0282-02">Click here to view code image</a></p>
<pre class="pre">```{r list_example, <span class="pd_blue">echo =</span> <span class="pd_maroon1">FALSE</span>}
markdown_list &lt;- <span class="pd_green1">"
- Lions
- Tigers
- Bears
- Oh mys
"</span>
```

<span class="pd_blue">`r markdown_list`</span></pre>
<p class="noindent">This code outputs a list that looks like this:</p>
<ul class="ul1">
<li><p class="bullet">Lions</p></li>
<li><p class="bullet">Tigers</p></li>
<li><p class="bullet">Bears</p></li>
<li><p class="bullet">Oh mys</p></li>
</ul>
<p class="noindent">When this approach is combined with the vectorized <code>paste()</code> function and its <code>collapse</code> argument, it becomes possible to convert vectors into Markdown lists that can be rendered:</p>
<p class="codelink"><a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18_images.xhtml#p0282-03a" id="p0282-03">Click here to view code image</a></p>
<pre class="pre">```{r pasted_list_example, <span class="pd_blue">echo =</span> <span class="pd_maroon1">FALSE</span>}
<span class="pd_maroon1"># Create a vector of animals</span>
animals &lt;- <span class="pd_blue"><strong>c</strong></span>(<span class="pd_green1">"Lions"</span>, <span class="pd_green1">"Tigers"</span>, <span class="pd_green1">"Bears"</span>, <span class="pd_green1">"Oh mys"</span>)

<span class="pd_maroon1"># Paste `-` in front of each animal and join the items together with
# newlines between</span>
markdown_list &lt;- <span class="pd_blue"><strong>paste</strong></span>(<span class="pd_green1">"-"</span>, animals, <span class="pd_blue">collapse =</span> <span class="pd_green1"></span><span class="pd_green1">"\</span><span class="pd_green1">n"</span>)
```

<span class="pd_blue">`r markdown_list`</span></pre>
<p class="noindent"><span epub:type="pagebreak" id="page_283"></span>Of course, the contents of the vector (e.g., the text <code>"Lions"</code>) could include additional Markdown syntax to make it bold, italic, or hyperlinked text.</p>
<div class="note-g">
<p class="title">Tip</p>
<p class="notepara">Creating a “helper function” to help with formatting your output is a great approach. For some other work in this area, see the <code><strong>pander</strong></code><a id="ch18sbfn1" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#ch18sbfn1a" class="totri-footnote"><sup>a</sup></a> package.</p>
<p class="footnotesb"><a id="ch18sbfn1a" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#ch18sbfn1" class="totri-footnote"><sup>a</sup></a><a href="http://rapporter.github.io/pander/">http://rapporter.github.io/pander/</a></p>
</div>
<div class="heading">
<h4 id="sec18_3_3">18.3.3 Rendering Tables</h4>
<p class="noindent">Because data frames are so central to programming with <code>R</code>, R Markdown includes capabilities that enable you to render data frames as Markdown <em>tables</em> via the <code>knitr</code> package’s <code><strong>kable()</strong></code>
 function. This function takes as an argument the data frame you wish to
 render, and it will automatically convert that value into a string of 
text representing a Markdown table:</p>
</div>
<p class="codelink"><a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18_images.xhtml#p0283-02a" id="p0283-02">Click here to view code image</a></p>
<pre class="pre">```{r kable_example, <span class="pd_blue">echo =</span> <span class="pd_maroon1">FALSE</span>}
<span class="pd_blue"><strong>library</strong></span>(<span class="pd_green1">"knitr"</span>) <span class="pd_maroon1"># make sure you load the package (once per document)</span>

<span class="pd_maroon1"># Make a data frame</span>
letters &lt;- <span class="pd_blue"><strong>c</strong></span>(<span class="pd_green1">"a"</span>, <span class="pd_green1">"b"</span>, <span class="pd_green1">"c"</span>, <span class="pd_green1">"d"</span>)
numbers &lt;- <span class="pd_blue">1</span><span class="pd_red1"><strong>:</strong></span><span class="pd_blue">4</span>
df &lt;- <span class="pd_blue"><strong>data.frame</strong></span>(<span class="pd_blue">letters =</span> letters, <span class="pd_blue">numbers =</span> numbers)

<span class="pd_maroon1"># "Return" the table to render it</span>
<span class="pd_blue"><strong>kable</strong></span>(df)
```</pre>
<p class="noindent"><a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#fig18_5">Figure 18.5</a> compares the rendered R Markdown results with and without the <code>kable()</code> function. The <code>kable()</code>
 function supports a number of other arguments that can be used to 
customize how it outputs a table; see the documentation for details. 
Again, if the values in the data frame are strings that contain Markdown
 syntax (e.g., bold, italics, or hyperlinks), they will be rendered as 
such in the table!</p>
<figure id="fig18_5">
<img src="18_files/18fig05.jpg" aria-describedby="alt_18fig05" alt="A figure demonstrates the usage of kable function." data-mfp-src="/library/view/programming-skills-for/9780135159071/graphics/18fig05.jpg" width="651" height="257">
<figcaption><span class="pd_ash">Figure 18.5</span> R Markdown rendering a data frame with and without the <code>kable()</code> function.
<aside class="hidden" id="alt_18fig05">
<p>A figure constituted of two screenshots displays a data frame 
rendered with and without the kable function. For both outputs, the 
sample is used to tabulate the first four alphabets and numbers under 
letters and numbers column headers, respectively. The data frame without
 the kable function: the data is rendered in four separate lines, one 
below the other, with "hashes" at the beginning of each line. "letters" 
and "numbers" form the first line of output, followed by the first four 
alphabets and numbers 1 to 4 in each line. The lines are numbered from 1
 to 4. An example of the output is: hash hash 1 a 1. The data frame with
 kable function: a table with column headers letters and numbers is 
shown. The data is given row-wise and they are a 1, b 2, c 3, and d 4.</p>
</aside>
</figcaption>
</figure>
<div class="box-ash">
<p class="title">Going Further</p>
<p class="sidebarpara">Tables generated with the <code>kable()</code> function can be further customized using additional packages, such as <code><strong>kableExtra</strong></code>.<a id="ch18sbfn2" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#ch18sbfn2a" class="totri-footnote"><sup>a</sup></a> This package allows you to add more layers and styling to a table using a format similar to how you add labels and themes with <code>ggplot2</code>.</p>
<p class="footnotesb"><a id="ch18sbfn2a" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#ch18sbfn2" class="totri-footnote"><sup>a</sup></a><a href="http://haozhu233.github.io/kableExtra/">http://haozhu233.github.io/kableExtra/</a></p>
</div>
<p class="noindent"><span epub:type="pagebreak" id="page_284"></span>So 
while you may need to do a little bit of work to manually generate the 
Markdown syntax, R Markdown makes it is possible to dynamically produce 
complex documents based on dynamic data sources.</p>
<div class="heading">
<h4 id="sec18_3_4">18.3.4 Rendering Plots</h4>
<p class="noindent">You can also include visualizations created by <code>R</code> in your rendered reports! To do so, you have the code chunk “return” the plot you wish to render:</p>
</div>
<p class="codelink"><a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18_images.xhtml#p0284-01a" id="p0284-01">Click here to view code image</a></p>
<pre class="pre">```{r plot_example, <span class="pd_blue">echo =</span> <span class="pd_maroon1">FALSE</span>}
<span class="pd_blue"><strong>library</strong></span>(<span class="pd_green1">"ggplot2"</span>) <span class="pd_maroon1"># make sure you load the package (once per document)</span>

<span class="pd_maroon1"># Plot of college education vs. poverty rates in the Midwest</span>
<span class="pd_blue"><strong>ggplot</strong></span>(<span class="pd_blue">data =</span> midwest) <span class="pd_red1"><strong>+</strong></span>
  <span class="pd_blue"><strong>geom_point</strong></span>(
    <span class="pd_blue">mapping =</span> <span class="pd_blue"><strong>aes</strong></span>(<span class="pd_blue">x =</span> percollege, <span class="pd_blue">y =</span> percadultpoverty, <span class="pd_blue">color =</span> state)
  ) <span class="pd_red1"><strong>+</strong></span>
  <span class="pd_blue"><strong>scale_color_brewer</strong></span>(<span class="pd_blue">palette =</span> <span class="pd_green1">"Set3"</span>)
```</pre>
<p class="noindent">When knit, the document generated that includes this code would include the <code>ggplot2</code> chart. Moreover, RStudio allows you to <em>preview</em> each code chunk before knitting—just click the green play button icon above each chunk, as shown in <a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#fig18_6">Figure 18.6</a>.
 While this can help you debug individual chunks, it may be tedious to 
do in longer scripts, especially if variables in one code chunk rely on 
an earlier chunk.</p>
<figure id="fig18_6">
<img src="18_files/18fig06.jpg" aria-describedby="alt_18fig06" alt="A screenshot shows the preview each code chunk before knitting in RStudio." data-mfp-src="/library/view/programming-skills-for/9780135159071/graphics/18fig06.jpg" width="751" height="588">
<figcaption><span class="pd_ash">Figure 18.6</span> A preview of the content generated by <code>knitr</code> is displayed when you click the green <em>play button</em> icon (very helpful for debugging <code>.Rmd</code> files!).
<aside class="hidden" id="alt_18fig06">
<p>On the upper right corner of the screenshot, a green play button icon
 is indicated as Click to produce preview below. Below the screenshot, a
 graph with horizontal axis represents "percollege" ranging from 0 to 50
 and the vertical axis represents "percadultpoverty" ranging from 0 to 
40. The plots are plotted randomly on the graph representing the state 
postal code of Illinois, Indiana, Michigan, Ohio, and Wisconsin.</p>
</aside>
</figcaption>
</figure>
<p class="noindent">It is best practice to do any data wrangling necessary to prepare the data for your plot in a separate <code>.R</code> file, which you can then <code>source()</code> into the R Markdown (in an initial <code>setup</code> code chunk with the <code>include = FALSE</code> option). See <a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#sec18_5">Section 18.5</a> for an example of this organization.</p>
<div class="heading">
<h3 class="h3z" id="sec18_4">18.4 Sharing Reports as Websites</h3>
<p class="noindent">The default output format for new R Markdown scripts created with RStudio is <strong>HTML</strong> (with the content saved in a <code>.html</code> file). HTML stands for <em><strong>H</strong>yper<strong>T</strong>ext <strong>M</strong>arkup <strong>L</strong>anguage</em>
 and, like the Markdown language, is a syntax for describing the 
structure and formatting of content (though HTML is far more extensive 
and detailed). In particular, HTML is a markup language that can be 
automatically rendered by web browsers, so it is the language used to 
create webpages. In fact, you can open up <code>.html</code> files generated by RStudio in any web browser to see the content. Additionally, this means that the <code>.html</code> files you create with R Markdown can be put online as webpages for others to view!</p>
</div>
<p class="noindent"><span epub:type="pagebreak" id="page_285"></span>As it turns out, you can use GitHub not only to host versions of your code repository, but also to serve (display) <code>.html</code> files—including ones generated from R Markdown. Github will <strong>host</strong> webpages on a publicly accessible web server that can “serve” the page to anyone who requests it (at a particular URL on the <code>github.io</code> domain). This feature is known as <em>GitHub Pages</em>.<a id="ch18fn7a" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#ch18fn7" class="totri-footnote"><sup>7</sup></a></p>
<p class="footnote"><a id="ch18fn7" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#ch18fn7a" class="totri-footnote"><sup>7</sup></a><strong>What Is GitHub Pages</strong>: <a href="https://help.github.com/articles/what-is-github-pages/">https://help.github.com/articles/what-is-github-pages/</a></p>
<p class="noindent">Using GitHub Pages involves a few steps. First, you need to knit your document into a <code>.html</code> file with the name <code><strong>index.html</strong></code>—this
 is the traditional name for a website’s homepage (and the file that 
will be served at a particular URL by default). You will need to have <code>pushed</code> this file to a GitHub repository; the <code>index.html</code> file will need to be in the <strong>root folder</strong> of the repo.</p>
<p class="noindent"><span epub:type="pagebreak" id="page_286"></span>Next, you need to configure that GitHub repository to enable GitHub Pages. On the web portal page for your repo, click on the <em>“Settings”</em> tab, and scroll down to the section labeled <em>“GitHub Pages.”</em> From there, you need to specify the “Source” of the <code>.html</code> file that Github Pages should serve. Select the <em>“master branch”</em> option to enable GitHub Pages and have it serve the “master” version of your <code>index.html</code> file (see <a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#fig18_7">Figure 18.7</a>).</p>
<figure id="fig18_7">
<img src="18_files/18fig07.jpg" alt="The &quot;GitHub Pages&quot; displays the None drop-down button under the Source box. The master branch: User the master branch for GitHub Pages is selected and tick is marked for None: Disable GitHub Pages." data-mfp-src="/library/view/programming-skills-for/9780135159071/graphics/18fig07.jpg" width="775" height="448">
<figcaption><span class="pd_ash">Figure 18.7</span> Enable hosting via GitHub Pages for a repository by navigating to the <em>Settings</em> tab on a repository and scrolling down to the <em>GitHub Pages</em> section. Set the “source” as the <code>master</code> branch to host your compiled <code>index.html</code> file as a website!</figcaption>
</figure>
<div class="box-ash">
<p class="title">Going Further</p>
<p class="sidebarpara">If you push code to a different branch on GitHub with the name <code>gh-pages</code>,
 GitHub Pages will automatically be enabled—serving the files on that 
branch—without any need to adjust the repository settings. See <a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch20.xhtml#sec20_1">Section 20.1</a> for details on working with branches.</p>
</div>
<p class="noindent">Once you’ve enabled GitHub Pages, you will be able to view your hosted webpage at the URL:</p>
<p class="codelink"><a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18_images.xhtml#p0286-01a" id="p0286-01">Click here to view code image</a></p>
<pre class="pre"><span class="pd_maroon1"># The URL for a website hosted with GitHub Pages</span>
https://GITHUB_USERNAME.github.io/REPO_NAME</pre>
<p class="noindent">Replace <code>GITHUB_USERNAME</code> with the username of <em>the account hosting the repo</em>, and <code>REPO_NAME</code> with your repository name. Thus, if you pushed your code to the <code>mkfreeman/report</code> repo on GitHub (stored online at <a href="https://github.com/mkfreeman/report">https://github.com/mkfreeman/report</a>), the webpage would be available at <code><a href="https://mkfreeman.github.io/report">https://mkfreeman.github.io/report</a></code>. See the official documentation<a id="ch18fn8a" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#ch18fn8" class="totri-footnote"><sup>8</sup></a> for more details and options.</p>
<p class="footnote"><a id="ch18fn8" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#ch18fn8a" class="totri-footnote"><sup>8</sup></a><strong>Documentation for GitHub Pages:</strong> <a href="https://help.github.com/articles/user-organization-and-project-pages/">https://help.github.com/articles/user-organization-and-project-pages/</a></p>
<div class="heading">
<h3 class="h3z" id="sec18_5"><span epub:type="pagebreak" id="page_287"></span>18.5 R Markdown in Action: Reporting on Life Expectancy</h3>
<p class="noindent">To demonstrate the power of using R Markdown as a 
tool to generate dynamic reports, this section walks through authoring a
 report about the life expectancy in each country from 1960 to 2015. The
 data for the example can be downloaded from the World Bank.<a id="ch18fn9a" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#ch18fn9" class="totri-footnote"><sup>9</sup></a> The complete code for this analysis is also available online in the book code repository.<a id="ch18fn10a" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#ch18fn10"><sup>10</sup></a> A subset of the data is shown in <a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#fig18_8">Figure 18.8</a>.</p>
</div>
<p class="footnote"><a id="ch18fn9" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#ch18fn9a" class="totri-footnote"><sup>9</sup></a><strong>World Bank: life expectancy at birth data:</strong> <a href="https://data.worldbank.org/indicator/SP.DYN.LE00.IN">https://data.worldbank.org/indicator/SP.DYN.LE00.IN</a></p>
<p class="footnote"><a id="ch18fn10" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#ch18fn10a"><sup>10</sup></a><strong>R Markdown in Action</strong>: <a href="https://github.com/programming-for-data-science/in-action/tree/master/r-markdown">https://github.com/programming-for-data-science/in-action/tree/master/r-markdown</a></p>
<figure id="fig18_8">
<img src="18_files/18fig08.jpg" aria-describedby="alt_18fig08" alt="A screenshot depicts the subset of the World Bank data on the life expectancy in each country from 1960 to 2015." data-mfp-src="/library/view/programming-skills-for/9780135159071/graphics/18fig08.jpg" width="775" height="236">
<figcaption><span class="pd_ash">Figure 18.8</span> A subset of the World Bank data on the life expectancy in each country from 1960 to 2015.
<aside class="hidden" id="alt_18fig08">
<p>The table has the column headers: Country.Name, Country.Code, Indicator.Name, Indicator.Code, X1960, and X1961.</p>
</aside>
</figcaption>
</figure>
<p class="noindent">To keep the code organized, the report will be written in two separate files:</p>
<ul>
<li><p class="bullet"><code>analysis.R</code>, which will contain the analysis and save important values in variables</p></li>
<li><p class="bullet"><code>index.Rmd</code>, which will <code>source()</code> the <code>analysis.R</code> script, and generate the report (the file is named so that it can be hosted on GitHub Pages when rendered)</p></li>
</ul>
<p class="noindent">The <code>analysis.R</code> file will need to complete the following tasks:</p>
<ul>
<li><p class="bullet">Load the data.</p></li>
<li><p class="bullet">Compute metrics of interest.</p></li>
<li><p class="bullet">Generate data visualizations to display.</p></li>
</ul>
<p class="noindent">As each step is completed in this file, key 
reporting values and charts are saved to variables so that they can be 
referenced in the <code>index.Rmd</code> file.</p>
<p class="noindent">To reference these variables, you load the <code>analysis.R</code> script (with <code>source()</code>) in a “setup” block of the <code>index.Rmd</code> file, enabling its data to be referenced within the Markdown. The <code>include = FALSE</code> code chunk option means that the block will be evaluated, but not rendered in the document.</p>
<p class="codelink"><a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18_images.xhtml#p0287-01a" id="p0287-01">Click here to view code image</a></p>
<pre class="pre">```{r setup, <span class="pd_blue">include =</span> <span class="pd_maroon1">FALSE</span>}
<span class="pd_maroon1"># Load results from the analysis
# Errors and messages will not be printed because `include` is set to FALSE</span>
<span class="pd_blue"><strong>source</strong></span>(<span class="pd_green1">"analysis.R"</span>)
```</pre>
<div class="note-y">
<p class="title"><span epub:type="pagebreak" id="page_288"></span>Remember</p>
<p class="notepara">All “algorithmic” work should be done in the separate <code>analysis.R</code>
 file, allowing you to more easily debug and iterate your analysis. 
Since visualizations are part of the “presented” information, they could
 instead be generated directly in the R Markdown, though the data to be 
visualized should be preprocessed in the <code>analysis.R</code> file.</p>
</div>
<p class="noindent">To compute the metrics of interest in your <code>analysis.R</code> file, you can use <code>dplyr</code> functions to ask questions of the data set. For example:</p>
<p class="codelink"><a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18_images.xhtml#p0288-01a" id="p0288-01">Click here to view code image</a></p>
<pre class="pre"><span class="pd_maroon1"># Load the data, skipping unnecessary rows</span>
life_exp &lt;- <span class="pd_blue"><strong>read.csv</strong></span>(
  <span class="pd_green1">"data/API_SP.DYN.LE00.IN_DS2_en_csv_v2.csv"</span>,
  <span class="pd_blue">skip =</span> <span class="pd_blue">4</span>,
  <span class="pd_blue">stringsAsFactors =</span> <span class="pd_maroon1">FALSE</span>
)

<span class="pd_maroon1"># Which country had the longest life expectancy in 2015?</span>
longest_le &lt;- life_exp <span class="pd_red1"><strong>%&gt;%</strong></span>
  <span class="pd_blue"><strong>filter</strong></span>(X2015 <span class="pd_red1"><strong>==</strong></span> <span class="pd_blue"><strong>max</strong></span>(X2015, <span class="pd_blue">na.rm =</span> T)) <span class="pd_red1"><strong>%&gt;%</strong></span>
  <span class="pd_blue"><strong>select</strong></span>(Country.Name, X2015) <span class="pd_red1"><strong>%&gt;%</strong></span>
  <span class="pd_blue"><strong>mutate</strong></span>(<span class="pd_blue">expectancy =</span> <span class="pd_blue"><strong>round</strong></span>(X2015, <span class="pd_blue">1</span>)) <span class="pd_maroon1"># rename and format column</span></pre>
<p class="noindent">In this example, the data frame <code>longest_le</code> stores an answer to the question <em>Which country had the longest life expectancy in 2015?</em> This data frame could be included directly as content of the <code>index.Rmd</code>
 file. You will be able to reference values from this data frame inline 
to ensure the report contains the most up-to-date information, even if 
the data in your analysis changes:</p>
<p class="codelink"><a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18_images.xhtml#p0288-02a" id="p0288-02">Click here to view code image</a></p>
<pre class="pre">The data revealed that the country with the longest life expectancy is
<span class="pd_blue">`r longest_le$Country.Name</span>`, with a life expectancy of
<span class="pd_blue">`r longest_le$expectancy</span>`.</pre>
<p class="noindent">When rendered, this code snippet would replace <code>`r longest_le$Country.Name`</code>
 with the value of that variable. Similarly, if you want to show a table
 as part of your report, you can construct a data frame with the desired
 information in your <code>analysis.R</code> script, and render it in your <code>index.Rmd</code> file using the <code>kable()</code> function:</p>
<p class="codelink"><a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18_images.xhtml#p0288-03a" id="p0288-03">Click here to view code image</a></p>
<pre class="pre"><span class="pd_maroon1"># What are the 10 countries that experienced the greatest gain in
# life expectancy?</span>
top_10_gain &lt;- life_exp <span class="pd_red1"><strong>%&gt;%</strong></span>
  <span class="pd_blue"><strong>mutate</strong></span>(<span class="pd_blue">gain =</span> X2015 <span class="pd_red1"><strong>-</strong></span> X1960) <span class="pd_red1"><strong>%&gt;%</strong></span>
  <span class="pd_blue"><strong>top_n</strong></span>(<span class="pd_blue">10</span>, <span class="pd_blue">wt =</span> gain) <span class="pd_red1"><strong>%&gt;%</strong></span> <span class="pd_maroon1"># a handy dplyr function!</span>
  <span class="pd_blue"><strong>arrange</strong></span>(<span class="pd_red1"><strong>-</strong></span>gain) <span class="pd_red1"><strong>%&gt;%</strong></span>
  <span class="pd_blue"><strong>mutate</strong></span>(<span class="pd_blue">gain_str =</span> <span class="pd_blue"><strong>paste</strong></span>(<span class="pd_blue"><strong>format</strong></span>(<span class="pd_blue"><strong>round</strong></span>(gain, <span class="pd_blue">1</span>), <span class="pd_blue">nsmall =</span> <span class="pd_blue">1</span>)<span class="pd_green1">,"years"</span>)) <span class="pd_red1"><strong>%&gt;%</strong></span>
  <span class="pd_blue"><strong>select</strong></span>(Country.Name, gain_formatted)</pre>
<p class="noindent"><span epub:type="pagebreak" id="page_289"></span>Once you have stored the desired information in the <code>top_10_gain</code> data frame in your <code>analysis.R</code> script, you can display that information in your <code>index.Rmd</code> file using the following syntax:</p>
<p class="codelink"><a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18_images.xhtml#p0289-01a" id="p0289-01">Click here to view code image</a></p>
<pre class="pre">```{r top_10_gain, <span class="pd_blue">echo =</span> <span class="pd_maroon1">FALSE</span>}
<span class="pd_maroon1"># Show the top 10 table (specifying the column names to display)</span>
<span class="pd_blue"><strong>kable</strong></span>(top_10_gain, <span class="pd_blue">col.names =</span> <span class="pd_blue"><strong>c</strong></span>(<span class="pd_green1">"Country"</span>, <span class="pd_green1">"Change in Life Expectancy"</span>))
```</pre>
<p class="noindent"><a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#fig18_9">Figure 18.9</a>
 shows the entire report; the complete analysis and R Markdown code to 
generate this report follows. Note that the report uses a package called
 <code>rworldmap</code> to quickly generate a simple, static world map (as an alternative to mapping with <code>ggplot2</code>).</p>
<p class="codelink"><a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18_images.xhtml#p0289-02a" id="p0289-02">Click here to view code image</a></p>
<pre class="pre"><span class="pd_maroon1"># analysis.R script</span>

<span class="pd_maroon1"># Load required libraries</span>
<span class="pd_blue"><strong>library</strong></span>(dplyr)
<span class="pd_blue"><strong>library</strong></span>(rworldmap) <span class="pd_maroon1"># for easy mapping</span>
<span class="pd_blue"><strong>library</strong></span>(RColorBrewer) <span class="pd_maroon1"># for selecting a color palette</span>

<span class="pd_maroon1"># Load the data, skipping unnecessary rows</span>
life_exp &lt;- <span class="pd_blue"><strong>read.csv</strong></span>(
  <span class="pd_green1">"data/API_SP.DYN.LE00.IN_DS2_en_csv_v2.csv"</span>,
  <span class="pd_blue">skip =</span> <span class="pd_blue">4</span>,
  <span class="pd_blue">stringsAsFactors =</span> <span class="pd_maroon1">FALSE</span>
)

<span class="pd_maroon1"># Notice that R puts the letter "X" in front of each year column,
# as column names can't begin with numbers</span>

<span class="pd_maroon1"># Which country had the longest life expectancy in 2015?</span>
longest_le &lt;- life_exp <span class="pd_red1"><strong>%&gt;%</strong></span>
  <span class="pd_blue"><strong>filter</strong></span>(X2015 <span class="pd_red1"><strong>==</strong></span> <span class="pd_blue"><strong>max</strong></span>(X2015, <span class="pd_blue">na.rm =</span> T)) <span class="pd_red1"><strong>%&gt;%</strong></span>
  <span class="pd_blue"><strong>select</strong></span>(Country.Name, X2015) <span class="pd_red1"><strong>%&gt;%</strong></span>
  <span class="pd_blue"><strong>mutate</strong></span>(<span class="pd_blue">expectancy =</span> <span class="pd_blue"><strong>round</strong></span>(X2015, <span class="pd_blue">1</span>)) <span class="pd_maroon1"># rename and format column</span>

<span class="pd_maroon1"># Which country had the shortest life expectancy in 2015?</span>
shortest_le &lt;- life_exp <span class="pd_red1"><strong>%&gt;%</strong></span>
  <span class="pd_blue"><strong>filter</strong></span>(X2015 <span class="pd_red1"><strong>==</strong></span> <span class="pd_blue"><strong>min</strong></span>(X2015, <span class="pd_blue">na.rm =</span> T)) <span class="pd_red1"><strong>%&gt;%</strong></span>
  <span class="pd_blue"><strong>select</strong></span>(Country.Name, X2015) <span class="pd_red1"><strong>%&gt;%</strong></span>
  <span class="pd_blue"><strong>mutate</strong></span>(<span class="pd_blue">expectancy =</span> <span class="pd_blue"><strong>round</strong></span>(X2015, <span class="pd_blue">1</span>)) <span class="pd_maroon1"># rename and format column</span>

<span class="pd_maroon1"># Calculate range in life expectancies</span>
le_difference &lt;- longest_le<span class="pd_red1"><strong>$</strong></span>expectancy <span class="pd_red1"><strong>-</strong></span> shortest_le<span class="pd_red1"><strong>$</strong></span>expectancy

<span epub:type="pagebreak" id="page_290"></span><span class="pd_maroon1"># What 10 countries experienced the greatest gain in life expectancy?</span>
top_10_gain &lt;- life_exp <span class="pd_red1"><strong>%&gt;%</strong></span>
  <span class="pd_blue"><strong>mutate</strong></span>(<span class="pd_blue">gain =</span> X2015 <span class="pd_red1"><strong>-</strong></span> X1960) <span class="pd_red1"><strong>%&gt;%</strong></span>
  <span class="pd_blue"><strong>top_n</strong></span>(<span class="pd_blue">10</span>, <span class="pd_blue">wt =</span> gain) <span class="pd_red1"><strong>%&gt;%</strong></span> <span class="pd_maroon1"># a handy dplyr function!</span>
  <span class="pd_blue"><strong>arrange</strong></span>(<span class="pd_red1"><strong>-</strong></span>gain) <span class="pd_red1"><strong>%&gt;%</strong></span>
  <span class="pd_blue"><strong>mutate</strong></span>(<span class="pd_blue">gain_str =</span> <span class="pd_blue"><strong>paste</strong></span>(<span class="pd_blue"><strong>format</strong></span>(<span class="pd_blue"><strong>round</strong></span>(gain, <span class="pd_blue">1</span>), <span class="pd_blue">nsmall =</span> <span class="pd_blue">1</span>), <span class="pd_green1">"years"</span>)) <span class="pd_red1"><strong>%&gt;%</strong></span>
  <span class="pd_blue"><strong>select</strong></span>(Country.Name, gain_str)</pre>
<figure id="fig18_9">
<img src="18_files/18fig09.jpg" alt="The Life Expectancy Report displays an overview of the Country with its change in life expectancy. The choropleth map identifies the geographic variation of life expectancy in the year 2015." data-mfp-src="/library/view/programming-skills-for/9780135159071/graphics/18fig09.jpg" width="777" height="827">
<figcaption><span class="pd_ash">Figure 18.9</span> A report on life expectancy generated with R Markdown.</figcaption>
</figure>
<p class="codelink"><span epub:type="pagebreak" id="page_291"></span><a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18_images.xhtml#p0291-01a" id="p0291-01">Click here to view code image</a></p>
<pre class="pre"><span class="pd_maroon1"># Join this data frame to a shapefile that describes how to draw each country
# The `rworldmap` package provides a helpful function for doing this</span>
mapped_data &lt;- <span class="pd_blue"><strong>joinCountryData2Map</strong></span>(
  life_exp,
  <span class="pd_blue">joinCode =</span> <span class="pd_green1">"ISO3"</span>,
  <span class="pd_blue">nameJoinColumn =</span> <span class="pd_green1">"Country.Code"</span>,
  <span class="pd_blue">mapResolution =</span> <span class="pd_green1">"high"</span>
)</pre>
<p class="noindent">The following <code>index.Rmd</code> file renders the report using the preceding <code>analysis.R</code> script:</p>
<p class="codelink"><a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18_images.xhtml#p0291-02a" id="p0291-02">Click here to view code image</a></p>
<pre class="pre">---
title: "Life Expectancy Report"
output: html_document
---

```{r setup, <span class="pd_blue">include =</span> <span class="pd_maroon1">FALSE</span>}
<span class="pd_maroon1"># Load results from the analysis
# errors and messages will not be printed given the `include = FALSE` option</span>
<span class="pd_blue"><strong>source</strong></span>(<span class="pd_green1">"analysis.R"</span>)

<span class="pd_maroon1"># Also load additional libraries that may be needed for output</span>
<span class="pd_blue"><strong>library</strong></span>(<span class="pd_green1">"knitr"</span>)
```

## Overview
This is a brief report regarding life expectancy for each country from
1960 to 2015 <span class="pd_maroon1">([source](https://data.worldbank.org/indicator/SP.DYN.LE00.IN)</span>).
The data reveals that the country with the longest life expectancy was
<span class="pd_blue">`r longest_le$Country.Name</span>`, with a life expectancy of
<span class="pd_blue">`r longest_le$expectancy</span>`. That life expectancy was <span class="pd_blue">`r le_difference`</span>
years longer than the life expectancy in <span class="pd_blue">`r shortest_le$Country.Name</span>`.

Here are the countries whose life expectancy **improved the most** since 1960.

```{r top_10_gain, <span class="pd_blue">echo =</span> <span class="pd_maroon1">FALSE</span>}
<span class="pd_maroon1"># Show the top 10 table (specifying the column names to display)</span>
<span class="pd_blue"><strong>kable</strong></span>(top_10_gain, <span class="pd_blue">col.names =</span> <span class="pd_blue"><strong>c</strong></span>(<span class="pd_green1">"Country"</span>, <span class="pd_green1">"Change in Life Expectancy"</span>))
```

## Life Expectancy in 2015
To identify geographic variations in life expectancy,
here is a choropleth map of life expectancy in 2015:

<span epub:type="pagebreak" id="page_292"></span>```{r le_map, <span class="pd_blue">echo =</span> <span class="pd_maroon1">FALSE</span>}
<span class="pd_maroon1"># Create and render a world map using the `rworldmap` package</span>
<span class="pd_blue"><strong>mapCountryData</strong></span>(
  mapped_data, <span class="pd_maroon1"># indicate the data to map</span>
  <span class="pd_blue">mapTitle =</span> <span class="pd_green1">"Life Expectancy in 2015"</span>,
  <span class="pd_blue">nameColumnToPlot =</span> <span class="pd_green1">"X2015"</span>,
  <span class="pd_blue">addLegend =</span> F, <span class="pd_maroon1"># exclude the legend</span>
  <span class="pd_blue">colourPalette =</span> <span class="pd_blue"><strong>brewer.pal</strong></span>(<span class="pd_blue">7</span>, <span class="pd_green1">"Blues"</span>) <span class="pd_maroon1"># set the color palette</span>
)
```</pre>
<p class="noindent">For practice creating reports with R Markdown, see the set of accompanying book exercises.<a id="ch18fn11a" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#ch18fn11"><sup>11</sup></a></p>
<p class="footnote"><a id="ch18fn11" href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch18.xhtml#ch18fn11a"><sup>11</sup></a><strong>R Markdown exercises:</strong> <a href="https://github.com/programming-for-data-science/chapter-18-exercises">https://github.com/programming-for-data-science/chapter-18-exercises</a></p>
<div class="annotator-outer annotator-viewer viewer annotator-hide">
  <ul class="annotator-widget annotator-listing"></ul>
</div><div class="annotator-modal-wrapper annotator-editor-modal annotator-editor annotator-hide">
	<div class="annotator-outer editor">
		<h2 class="title">Highlight</h2>
		<form class="annotator-widget">
			<ul class="annotator-listing">
			<li class="annotator-item"><textarea id="annotator-field-1" placeholder="Add a note using markdown (optional)" class="js-editor" maxlength="750"></textarea></li></ul>
			<div class="annotator-controls">
				<a class="link-to-markdown" href="https://daringfireball.net/projects/markdown/basics" target="_blank">?</a>
				<ul>
					<li class="delete annotator-hide"><a href="#delete" class="annotator-delete-note button positive">Delete Note</a></li>
					<li class="save"><a href="#save" class="annotator-save annotator-focus button positive">Save Note</a></li>
					<li class="cancel"><a href="#cancel" class="annotator-cancel button">Cancel</a></li>
				</ul>
			</div>
		</form>
	</div>
</div><div class="annotator-modal-wrapper annotator-delete-confirm-modal" style="display: none;">
  <div class="annotator-outer">
    <h2 class="title">Highlight</h2>
      <a class="js-close-delete-confirm annotator-cancel close" href="#close">Close</a>
      <div class="annotator-widget">
         <div class="delete-confirm">
            Are you sure you want to permanently delete this note?
         </div>
         <div class="annotator-controls">
            <a href="#cancel" class="annotator-cancel button js-cancel-delete-confirm">No, I changed my mind</a>
            <a href="#delete" class="annotator-delete button positive js-delete-confirm">Yes, delete it</a>
         </div>
       </div>
   </div>
</div><div class="annotator-adder" style="display: none;">
	<ul class="adders">
		
		<li class="copy"><a href="#">Copy</a></li>
		
		<li class="add-highlight"><a href="#">Add Highlight</a></li>
		<li class="add-note"><a href="#">
			Add Note
		</a></li>
		
	</ul>
</div></div></div>



  <div class="t-sbo-prev sbo-prev sbo-nav-bottom">
  
    
      
        <a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/part06.xhtml" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">VI Building and Sharing Applications</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-bottom">
  
    
      
        <a href="https://learning.oreilly.com/library/view/programming-skills-for/9780135159071/ch19.xhtml" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">19 Building Interactive Web Applications with Shiny</div>
        </a>
    
  
  </div>

</section>
  </div>
<section class="sbo-saved-archives"></section>



          
          
  




    
    



        
      </div>
      




  <footer class="pagefoot">
    <a href="#" class="icon-up" style="display: none;"><div class="visuallyhidden">Back to top</div></a>
    <ul class="js-footer-nav">
      <li class="full-support"><a href="https://www.oreilly.com/online-learning/support/">Support</a></li>
      <li><a href="https://www.oreilly.com/online-learning/apps.html">Get the App</a></li>
      
        <li><a href="https://learning.oreilly.com/accounts/logout/">Sign Out</a></li>
      
    </ul>
    <span class="copyright">© 2019 <a href="https://learning.oreilly.com/" target="_blank">Safari</a>.</span>
    <a href="https://learning.oreilly.com/terms/">Terms of Service</a> /
    <a href="https://learning.oreilly.com/membership-agreement/">Membership Agreement</a> /
    <a href="https://www.oreilly.com/privacy.html">Privacy Policy</a>
  </footer>

<script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"licenseKey":"510f1a6865","transactionName":"YgdaZ0NSW0cEB0RdWltNfkZfUEFdCgofXFBHDVYdR1pQQxZeRl1QQj1aWkU=","agent":"","queueTime":2,"beacon":"bam.nr-data.net","errorBeacon":"bam.nr-data.net","applicationID":"3275661,67267027,67267028","applicationTime":382}</script>


    
    <script src="18_files/a" charset="utf-8"></script>
    <script src="18_files/a_002" charset="utf-8"></script>
  

<div class="annotator-notice"></div><div class="font-flyout" style="top: 201.416px; left: 1235px;"><div class="font-controls-panel">
	<div class="nightmodes">
		<ul>
			<li class="day"><a href="#" id="day-mode" title="Day Mode">
				<i class="fa fa-sun-o"></i>
				<span>Day Mode</span></a></li>
			<li class="cloudy"><a href="#" id="cloudy-mode" title="Cloudy Mode">
				<i class="fa fa-cloud"></i>
				<span>Cloud Mode</span>
			</a></li>
			<li class="night"><a href="#" id="night-mode" title="Night Mode">
				<i class="fa fa-moon-o"></i>
				<span>Night Mode</span>
			</a></li>
		</ul>
	</div>

	<div class="font-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-font left"></i>
			<span class="filler" style="width: 55.9211%;"></span>
			<div id="js-font-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; top: 0px; left: 85px;"></div>
			<i class="fa fa-font right"></i>
		</div>
	</div>

	<div class="column-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-compress left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-column-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-expand right"></i>
		</div>
	</div>

	<a id="reset" class="button" href="#">Reset</a>
</div>
</div></body></html>